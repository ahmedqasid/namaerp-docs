<rtl>

# ملاحظات إصدار نما ERP - مايو 2016

::: info معلومات الإصدار
**تاريخ الإصدار:** مايو 2016  
**رقم الإصدار:** 201605
:::

## الإضافات

### نظام المخزون
- تم عمل مسار الكيان `EAFieldsValuesCalculator` وذلك لإضافة حقل داخل ملف الأصناف يمكن أن يعمل بطريقة **تكويد آلي (سيريال)**.
- تم التحسين بحيث يمكن إدخال **الموقع المخزني الافتراضي** لكل صنف.
- تم التحسين بحيث إذا تم عمل مستند حجز لكمية من صنف معين وحاول المستخدم عمل فاتورة مبيعات على الصنف المحجوز أن يتم تغيير رسالة الخطأ من (الكمية من الصنف لا تكفي) إلى الرسالة **(الكمية (س) من الصنف محجوزة)**.
- تم تفعيل **التكويد الآلي** مع **الكود البديل**.
- تم تطوير نظام **لقوالب الكلمات المفتاحية** وذلك لنظام الكلمات المفتاحية للأصناف.
- تم إضافة إمكانية **تحريك التصنيفات** بملف الصنف.
- تم منع تعديل كميات سند التوصيل عن طريق مسار الكيان `EAPreventChangingSCDocumentCriticalFields`.
- تم إضافة الخيار **"التأكد من التسلسل في الحفظ أول مرة فقط"** في توجيه سند التوصيل.
- تم إضافة **حد الطلب للمقاسات والألوان والإصدارات** بملف الصنف.
- بمستند التحويل المخزني، تم إضافة الخيار **"حساب تواريخ الصلاحية من كود الشحنة"**.
- تم إضافة القسم **"محددات تسمح بالسحب على المكشوف"** بإعدادات إدارة التوزيع.
- تم تطوير **فئات للأصناف**، كل فئة في ملف مستقل.
- تم السماح بإرفاق **أكثر من صورة** في ملف الصنف.

### نظام المبيعات
- تم تحسين مسار الكيان `EAFieldsValuesCalculator` مع الحدث **"تحديث الحقول المحسوبة"**، بحيث يقوم النظام بمجرد حفظ الفاتورة، يقوم النظام بإدراج المخزن والمندوب تبعاً للدفتر المختار.
- تم إضافة صفحة خاصة **بالأصول الثابتة** إلى ملف العميل.

### نظام المشتريات
- تم إضافة تحسينات **بمستند تعديل الخصومات** بحيث تقبل أكثر من فاتورة وتعمل ويتم تطبيقها على فترة محددة وعلى موردين محددين، ومن فرع إلى فرع...المحددات.

### نظام الحسابات
- تم إضافة **مرفق على السطر** في سند القيد.

### نظام الأصول الثابتة
- تم إضافة **قيمة الاقتناء الافتتاحي** و**قيمة الإهلاك الافتتاحي** لمستند افتتاح أصل ثابت.

### نظام البنوك
- تم تعديل الورقة المالية بحيث يمكن السماح **بتعديل الذمة** بعد عمل سند قبض أو صرف عليها.
- تم إضافة الحقل **"اسم الموقع"** لمستند الورقة المالية وذلك لاستخدامه في طباعة الشيكات من النظام.

### نظام المقاولات
- تم **تكبير حجم السطور** في المقايسة.
- تم إضافة إمكانية عمل **عقد مقاول باطن دون ربطه بعقد مشروع**.

### نظام مراكز الخدمة
- **مستند طلب الخدمة:** تم إضافة حقول خاصة **بتاريخ ووقت الحجز**.
- **مستند طلب الخدمة:** تم تغيير ترجمة اللغة العربية لاسم المجموعة "Dates" بحيث يصبح **"تاريخ الحجز والتسليم"**.

### نظام خدمة العملاء
- تم إضافة **مرفقات** داخل شاشات التحليل والعروض.
- تم إضافة حالة جديدة إلى طلبات التطوير وهي **"معاد فتحها"**.
- تم منع تعديل حالة الطلبات إذا تمت في إصدار.
- تم إضافة **مرفقات** داخل طلب الدعم مثل المرفقات الموجودة داخل طلب التطوير.

### نظام الاستثمار العقاري
- **سند التحصيل:** تم إضافة شاشة للتفاصيل داخل مستند التحصيل لإظهار المستندات المرتبطة مثل سندات القبض وسندات تحويل الملكية.
- تم إنشاء **شاشة تفاصيل** داخل الوحدة تحتوي كافة التعاملات التي تمت على هذه الوحدة (مثل عقد الإيجار أو عقد البيع أو مستند الحجز).

### نظام الموارد البشرية
- تم إضافة حقل جديد لسند تعميد شركة تأمين **"إضافة مرافقين فقط"** يقوم بتعديل تأمين المرافقين فقط. القيد يتم إنشاؤه فقط لسطور المرافقين وليس سطور الموظفين ولا يتم تحديث بيانات الموظف نفسه وإنما فقط بيانات المرافقين.
- تم إضافة مستند **"مستند خطة إجازات"**.
- تم تطوير **مستند لتغيير حالة موظف**.
- في سند المخالفة، تم احتساب **قيمة الخصم بالدقيقة** بدلاً من الساعة.
- تم إضافة الخيار **"يصرف لفترات العمل الكاملة فقط"** بملف فرد الراتب.
- تم تعديل سند تعميد في التأمين الصحي، كالتالي:
  - تم عدم ربط سن المرافقين بسن الموظف
  - تم ضبط قيمة التأمين بناءً على صلة القرابة
- تم إضافة مسار كيان جديد يقوم بتعديل قيمة أول مفرد وإعادة حساب الضرائب وما إلى ذلك حتى يصل إلى فرق مقبول أو يتعدى عدد محدد من المحاولات. هذا المسار هو `CalcBasicSalaryForNetSalary`.
- تم إضافة **عشر حقول** لسطور سجل الراتب وهي `sComponentValue1` - `sComponentValue2` - ...... `sComponentValue10`، كما تم إضافة نفس الحقول لإعدادات الموارد البشرية، كما يمكن إظهار الحقول الجديدة في سجل الراتب عن طريق تعديل الشاشة.
- تم اعتبار **أولوية مفرد الضريبة** عند حساب الضريبة.
- تم السماح بعدم تعديل قيمة مفرد الرتب عند إعادة إصدار سند الرتب لمفردات معينة.
- تم التعديل بحيث عند إعادة إصدار سند راتب مسودة يتم تركه مسودة كما هو.

### نظام الحسابات
- تم إظهار **مجموع مبالغ الفواتير** بصفحة الفواتير بمستند القبض.
- **ملف توزيع الحسابات:** تم إضافة الحقل **"أقل قيمة يمكن توزيعها للقطاع\الفرع\الإدارة\المجموعة التحليلية"** بالصفحات (قطاع - فرع ..-الخ).
- تم إضافة **المحصل** في سندات القبض.
- تم السماح بتقسيم طلب الصرف على عدة سندات صرف بحيث يتم توزيع قيمة طلب الصرف على عدة مستندات صرف.

### نظام التصنيع
- تم إضافة الخيار **"السماح لعمليات التشغيل بتخطي عدد الموارد الموجودة في صالة التشغيل"** بإعدادات التصنيع.
- تم توضيح عناوين التأثيرات المحاسبية الموجودة في توجيه مستند: إغلاق أمر الإنتاج، والمتعلقة بوقت المورد وقيمة المورد والخامات والمنتج النهائي.
- **سند التوقعات:** تم التحسين بحيث يمكن أن يتم التجميع لكل ثلاثة شهور.
- **طلب صرف مواد خام:** تم التحسين بحيث يكون الحقل **"بناءً على أمر إنتاج"** ليس من الحقول المطلوبة.

### نظام الأصول الثابتة
- تم إضافة **الفترة المالية والسنة المالية** لكل من الملفين `FAPropertiesEntry`، `FALocationEntry`.

### نظام نقاط البيع
- تم السماح بتحميل نقاط البيع من العنوان `pos/bin/com.namasoft` حيث يمكن فك الملف وتشغيل الملف `pos-0.0.1-SNAPSHOT-jfx.jar` من مكانه.

## الإعدادات

1. تم التحسين بحيث يمكن عرض أعمدة من السطور وإضافتها إلى البحث. كذلك يمكن إضافة حقل من داخل حقل آخر (مثال في فاتورة المبيعات يمكن عرض فئة الصنف في القائمة أو استخدامه في البحث عن طريق الحقل `details.item.item.category1`).

2. تم إضافة إمكانية الوصول إلى بيانات المستخدم الحالي في الاستعلامات حيث يمكن استخدام `($currentUser.code)`.

3. تم عمل إجراء جديد يمكن استعماله مع المهام المجدولة وسيقوم بفك الحجز بناءً على استعلام يقوم بتحديد النوع في العمود الأول ثم المعرف في العمود الثاني. هذا الإجراء هو `com.namasoft.modules.supplychain.domain.utils.EACancelReservationOfDocsByQuery`.

4. تم إضافة إمكانية مطالعة السجلات التي أنشأها مستخدم والتي أنشأها مستخدمين محددين يتم تحديدهم في ملف الصلاحية.

5. تم إضافة **20 حقل نصي** و**10 حقول متنوعة** بملفات المحددات ليمكن استخدامها في التجهيز والتقارير وإدخال بيانات أكثر على المحددات.

6. تم إضافة صفحة خاصة **بتعديل البلوكات** بملف "تعديل شاشة".

7. تم تثبيت عدد السجلات `all` في التنويهات ليكون **500**.

8. تم عمل اقتراح للمصدر في كل من صفحة التقارير، وصفحة اللوحات لملف تعديل شاشة.

9. تم السماح للجداول باستعمال `HTML` بدلاً من النصوص.

10. تم تقليل حجم التحميل المبدئي للبرنامج عن طريق تحميل ملفات الداشبورد عند الحاجة فقط.

11. **نافذة المستندات الدورية:** تم إضافة صفحة تفاصيل تظهر بها المستندات المنشأة والتي تم إصدارها نظام المستندات الدورية.

12. **نافذة المستندات الدورية:** تم إضافة الخيار **"منع التعديل"** على مستوى السطر وذلك لمنع تعديل المستندات الدورية.

13. **نافذة المستندات الدورية:** تم السماح بتحديد عدد مرات التكرار أو إلى تاريخ، حيث تم إضافة الزرين **"تكرار المستندات لتاريخ محدد"**، **"تكرار المستندات لفترة"**.

14. تم عمل مستند جديد **"ملحوظات اجتماع"**.

15. تم السماح بصلاحية `(UserFiledFilter)` أن تكون مفتوحة لجميع المستخدمين على النظام بدون إضافتها، وذلك عن طريق إعدادات الحقول والشاشات.

16. تم عمل مسار كيان `ValidateSorceLinesOfFromDocAction` والذي يقوم بالتأكد من وجود سطر في بناءً علي لكل سطر في المستند.

17. تم إضافة `$toReal` وذلك لتسهيل الوصول للمراجع، كالمثال التالي: `customer of from doc {fromDoc.$toReal.customer.name1}`.

18. تم تطبيق **"المعايير"** داخل شاشة **"الحقول المطلوبة"**، بحيث يكون تطبيق الحقول المطلوبة مرتبط بتحقيق الشرط داخل الشاشة.

19. تم إضافة إمكانية عمل إعادة إصدار للملف `LedgerTransReq` لبعض أنواع المستندات نتيجة للتأثير الجديد لتوجيه المستند. هذه الأنواع هي: (فاتورة المبيعات، مردودات المبيعات، فاتورة المشتريات، مردودات المشتريات، الصرف المخزني، التوريد المخزني).

## أخطاء

### نظام المخزون

1. في سند الحجز وسند التوصيل: لا يسمح النظام بالبحث عن الأصناف في سطور المستند من خلال الضغط علي زر سهم السفل أو النقر `double click` بالماوس.

2. التوجيه الخاص بسندات الفحص والتوريد المخزني لا يعمل.

3. عند تشغيل قاعدة بيانات لا يوجد بها إعدادات المخازن، يظهر خطأ فني (`technical Error`).

4. تم إضافة الحقل **"الوحدة المستعملة لاقتراح الكميات"** بإعدادات إدارة التوزيع.

5. في حالة إنشاء مستند **"تحويل مخزني"** بناءً على مستند **"أمر إنتاج"**، تظهر الأخطاء التالية:
   - يقوم النظام باستدعاء بيانات السطور وبها أرقام الـ `LOT` ولكن بدون تواريخ الإنتاج والصلاحية
   - يقوم النظام في حالة استدعاء التواريخ بشكل يدوي باستدعاء تاريخ الانتهاء صحيحاً - أما تاريخ الإنتاج فلا يتم استخراجه بشكل صحيح

### نظام المبيعات

1. عند عمل مرتجع مبيعات مع فاتورة مرتجعة بالكامل تظهر رسالة (كمية الصنف غير كافية)، والصواب استبدال الرسالة بأن الفاتورة مرتجعة من قبل بمرتجع (رقم- كود مردود المبيعات).

### نظام المشتريات

1. **مستند "فاتورة مشتريات":** عند تجميع سندات التوريد المخزنية، يقوم النظام باستحضار سندات التوريد لنفس المورد ولا يتم عمل فلتر على المخزن المذكور بالمستند.

2. **فاتورة مشتريات:** في حالة تجميع سندات التوريد، يقوم البرنامج بتجميع السندات التي تم حفظها كمسودة ضمن المستندات المجمعة.

### نظام الحسابات

1. في بعض الأحيان يسمح النظام بعمل أكثر من سند صرف لنفس الورقة المالية.

2. يسمح النظام بسداد فاتورة تم سدادها قبل ذلك عن طريق سندات الصرف والقبض. وبالتالي تم منع عمل سند صرف أو قبض على فاتورة المتبقي بها 0 أو إجمالي المدفوع يساوي صافي الفاتورة.

3. في حقيبة الحسابات، يقبل النظام الحسابات الخاصة بالذمة في الحقيبة.

4. في توجيه سند القبض، عند اختيار حساب 1 في الجانب الدائن، يقوم النظام باختيار الحساب الرئيسي وكذلك في سند الصرف في اختيار الجانب المدين.

5. عند التعديل في سند الصرف تظهر رسالة خطأ فارغة.

6. عند عمل سند قبض لعميل وإدخال الفواتير في صفحة الفواتير، لا يتم تحديث سندات الدفع في الفاتورة ولا يتم تحديث المتبقي وإجمالي المدفوع من السندات.

7. لا يسمح النظام بحذف ورقة مالية من سند القبض أو الصرف إذا كان السند تحصيل ضمني.

8. يحدث خطأ عند إضافة فاتورة مبيعات في صفحة الفواتير في سند القبض.

9. يحدث خطأ عند عمل سند قبض بناءً على فاتورة مبيعات.

10. عند اختيار طريقة دفع معينة يتم إدراج الحساب البنكي ولكن لا يتم إدراج العملة بشكل تلقائي داخل مستندات القبض.

### نظام البنوك

1. في مستند التحويل البنكي يتم الحفظ على الرغم من اختلاف القيمة الدائنة عن المدينة.

2. يسمح النظام بعمل سند إلغاء لورقة مالية أكثر من مرة.

3. عند حفظ مستند التحويل البنكي، تظهر رسالة خطأ فارغة.

4. في مذكرة التسوية البنكية بعد تجميع البيانات وعمل التسوية والمطابقة، تظهر الحركات المعلقة ولكن تختفي بعد الحفظ.

### الإعدادات

1. لا يسمح النظام بطباعة تقرير نموذج قائمة.

2. لا يمكن إرسال تنويهات إلي العميل في طلب الدعم الفني.

3. تم التحسين بحيث يكون هناك فلاتر ومحرك بحث في قائمة التنويهات `List Notifications View`.

4. يحدث خطأ أحياناً عند حفظ سند إلغاء سند.

5. في المهام المجدولة، تم إضافة المستهدفين مثل التي موجودة في التنبيهات.

6. تم عمل مسار الكيان `SWSUpdateSalesInvoiceHandlingAction` لتحديث حالة تسليم فاتورة المبيعات بناءً على حالة الحجز، ويعمل مع الإجراء **"تحديث الحقول المحسوبة"**.

### نظام المقاولات

1. عند تحويل المقايسة إلى عقد، تنتقل كافة البيانات عدا التوصيف.

2. سند إجراء سيارة لا يقبل الحفظ.

### نظام الموارد البشرية

1. يسمح النظام بعمل سندين راتب لنفس الموظف عن نفس الشهر.

2. عند حساب الضرائب التراكمية في سند الراتب، يأخذ النظام في الاعتبار السندات المحفوظة كمسودة.

3. بسند الحضور والانصراف (إضافة موظف يدوي) يقوم البرنامج بحذف آخر يوم في الشهر. على سبيل المثال، عند اختيار حضور وانصراف موظف لشهر يناير، يقوم النظام بوضع التاريخ حتى يوم 30 فقط وكذلك باقي الشهور.

### نظام نقطة البيع

1. تم عمل محاذاة للحقول مع بعضها البعض (مثل كود العميل ونسبة الخصم وما إلى ذلك).

2. تم ضبط عناوين الحقول بحيث تحاذي يسار الحقل في العربية واليمين في الإنجليزية `Alignment`.

3. تم توحيد الفونت في كل الشاشات.

4. تم إضافة اختصار لإخفاء الشريط الجانبي واختصار آخر لإخفاء الأصناف المفضلة.

5. تم وضع مسلسل في الجدول (رقم السطر) لا يتم إدخاله ولكن يقوم دائماً بعرض رقم السطر (مثل رقم السطر في نما).

### نظام التصنيع

1. **عمليات التشغيل:** يسمح نما بتخطي الموارد الموجودة داخل صالة الإنتاج.

2. تم إضافة الخيار **"السماح لعمليات التشغيل بتخطي عدد المورد الموجود في صالة التشغيل"**.

3. في مستند **"تأكيد جودة":** في حالة قيام الموظف في الـ QA بعمل "مستند تأكيد جودة" ثم مراجعته من مدير الـ QA ثم يتم الموافقة عليه من موظف المعمل - تم التحسين بحيث لا يتم تفعيل زر **"إنشاء طلب تحويل"** الموجود داخل المستند إلا بعد موافقة موظف المعمل - أي لا يتم تفعيله إلا في حالة أن يكون حالة المستند **"تمت الموافقة"**.

4. **توجيه مستند استلام تالف:** في حالة اختيار **"إنشاء مستندات تلقائياً"**، لا يقبل حفظ دفتر وتوجيه داخل الإنشاء التلقائي - فعند الحفظ يقوم البرنامج بحذف الدفتر والتوجيه.

5. **سند التخطيط:** عند الضغط على زر **"تجميع"** واختيار المستندات التي سيتم تجميعها ثم الضغط على زر **"موافق"** تظهر الرسالة **"لا يمكن تنفيذ العملية"**.

6. **سند توقعات:** تم التحسين بحيث يكون هناك عمود تجميع لكل ثلاث شهور (مجموع ربع سنوي)، بالإضافة إلى عمود تجميع للـ 12 عمود (للأربعة أعمدة للمجموع الربع سنوي).

7. في مستند **"أمر إنتاج"** عند محاولة إدراج سطر إضافي في سطور الخامات، لا يتم استخراج الكمية `Final Required Qty` المطلوبة تلقائياً بعد إدخال الكمية الأساسية `Qty Primary` وذلك طبقاً للـ `BOM` كما هو الحال في الخامات المستدعاة.

8. عند الضغط على زر **"تجميع الشحنات"** داخل أي أمر إنتاج موجود بالفعل، يقوم النظام بإضافة سطر قبل أخير داخل سطور الخامات والكمية به سالبة والسبب في ذلك هو وجود كمية على المكشوف من الصنف.

9. يحدث خطأ أحياناً بأمر الإنتاج.

10. **مستند ارتجاع مواد خام:** في حالة إنشاء مستند **"ارتجاع مواد خام"** والبدء باختيار **"أمر الإنتاج"** ثم اختيار مستند في **"بناءً على"** مثل **"صرف مواد خام"**، يقوم النظام بإظهار قائمة بجميع مستندات صرف المواد الخام، والصواب أن يتم عمل فلتر على المستندات الظاهرة في **"بناءً على"** بحيث تظهر المستندات المرتبطة بأمر الإنتاج المذكور فقط.

## خطأ عام

1. عند اختيار شاشة `popup` تختفي كل المقترحات عند البحث.

2. تفشل معالجة بعض المستندات بسبب خطأ في أعمار الديون.

</rtl>