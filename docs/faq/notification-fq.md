<rtl>

# أسئلة شائعة عن التنبيهات والرسائل

## كيف أرسل تنبيه لكل عميل عند تسجيل سند قبض يحتوي على عدة سطور لعدة عملاء؟

عند تسجيل سند قبض يحتوي على عدة سطور لعدة عملاء، قد تلاحظ أن التنبيه يُرسل فقط لأول عميل ولا يُرسل لباقي العملاء الموجودين في السطور الأخرى.

### السبب

السبب هو أن القالب المستخدم لا يحتوي على جملة `loop` التي تسمح بتكرار الرسالة لكل سطر على حدة. وبالتالي، يتم توليد رسالة واحدة فقط باستخدام أول سطر، ويتم تجاهل باقي السطور.

### القالب غير الصحيح (لا يعمل بشكل متكرر)

```tempo
الشركة المتحدة فارم صيدلية د/ {lines.subsidiary.$toReal.name1} نحيط علمكم بأنة
تم اضافة استلام نقدية لحسابكم رقم الايصال {lines.rpaper} قيمة الأيصال {lines.amount.value.amount} جنية  بتاريخ {valueDate}
```

هذا القالب يرسل رسالة واحدة فقط باستخدام بيانات أول سطر فقط.

---

### القالب الصحيح لإرسال رسالة لكل عميل على حدة

```tempo
{loop(lines)}
{openmsg}
{sendto}{lines.subsidiary.$toReal.contactInfo.mobile}{endsendto}
الشركة المتحدة فارم صيدلية د/ {lines.subsidiary.$toReal.name1} نحيط علمكم بأنة
تم اضافة استلام نقدية لحسابكم رقم الايصال {lines.rpaper} قيمة الأيصال {lines.amount.value.amount} جنية  بتاريخ {valueDate}
{closemsg}
{enloop}
```

### شرح القالب سطرًا بسطر:

1. `{loop(lines)}`
   يبدأ تكرار على كل سطر في المستند.

2. `{openmsg}`
   يحدد بداية رسالة جديدة.

3. `{sendto}{lines.subsidiary.$toReal.contactInfo.mobile}{endsendto}`
   يحدد رقم الموبايل الذي ستُرسل إليه الرسالة — في هذه الحالة هو رقم العميل الموجود في السطر الحالي.

4. و5. محتوى الرسالة نفسه، مع استخدام بيانات السطر الحالي مثل اسم العميل، رقم الإيصال، المبلغ، وتاريخ السند.

5. `{closemsg}`
   ينهي الرسالة.

6. `{enloop}`
   ينهي التكرار.

بهذا الشكل، سيتم إرسال رسالة منفصلة لكل عميل موجود في كل سطر من سطور سند القبض، وبذلك يتم إعلام كل عميل بالمعلومة الخاصة به فقط.

</rtl>
