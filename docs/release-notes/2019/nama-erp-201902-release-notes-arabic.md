<rtl>

# ملاحظات إصدار نما ERP - فبراير 2019

::: info معلومات الإصدار
**تاريخ الإصدار:** فبراير 2019  
**رقم الإصدار:** 201902
:::

## الإضافات

### نظام المخزون
- تم إضافة آلية لتصدير صور األصناف من خلال قائمة مزيد بالصنف، حيث يقوم المستخدم باختيار بعض األصناف ثم تصديرها على هيئة ملف مضغوط. يمكن تطبيق هذه الخاصية بأي من ملفات النظام عن طريق تعديل الشاشة بالمعرف `exportSelectedFilesImagesWithCode`.
- تم تطوير آلية لقراءة كود الصنف وأكواد اإلصدارات والمقاسات وغيرها.
- **مستند الحجز:** تم إضافة الحقلين (إلى موظف، صورة إلى موظف) يمكن إظهارهما على النافذة عن طريق تعديل شاشة.
- تم تحسين مستند تكاليف االستالم اإلضافية بحيث يتم تجاهل سطور الفواتير التي تحتوي على أصناف خدمية.
- تم تحسين إعدادات متابعة الكميات والتكاليف بإعدادات إدارة التوزيع بحيث يتم اعتبار المحددات عن مطالعة قائمة عرض كميات وحركات الصنف.
- تم إضافة الحقل `allowOverdraft` إلى السطور (لم يتم إظهاره على الشاشة).
- **إنهاء الجرد المخزني:** تم إضافة الخيار "حساب الكميات طبقاً للتاريخ والحفظ" إلى قائمة المزيد بعرض القائمة. النظام سينتظر انتهاء معالجة كل حركات الكميات إلى أن تنتهي وبعدها يقوم بإعادة حساب الكميات.
- **إنهاء الجرد المخزني:** تم إضافة الخيار "اعتبار الحركات المخزنية في نفس يوم انهاء الجرد (ما عدا حركات التسوية الناتجة عن الجرد)" بمستند نهاية الجرد.
- تم عمل مسار كيان جروفي في مستند طلب الصرف المخزني يعمل مع الحفظ درافت يقوم بعمل إضافة األصناف الموجودة بالمخزن المختار في رأس مستند طلب الصرف بالشحنة المكتوبة في `description` على سطور التفاصيل بالكمية الكاملة لكل صنف.
- تم تطوير `app mobile android` للتحصيل الستخدامها في التحصيل.

### نظام المبيعات
- تم إضافة مسار كيان `EAReApplyQtyTrackingEffects` لحل مشكلة عدم انتقال الكمية من الحقل `unsatisfiedQty.details` إلى الحقل `satisfiedQty.details` عند عمل فاتورة على أمر البيع وتوجيه الفاتورة به متابعة للكمية على الكمية 1.

### نظام المشتريات
- في بعض األحيان يكون القيد الصادر من سند الصرف المخزني لمردود المشتريات خاطئ.
- **مستند تعديل الخصومات:** إذا تم تحديد فاتورة برأس المستند ونفس الفاتورة بتفاصيل المستند، يقوم النظام بمضاعفة الخصم على نفس الفاتورة.
- المستند ال يعمل إال على الخصم نسبة مركبة وال يعمل على النسبة الثابتة وال التخفيض.
- تم تحسين المستند بحيث يقوم النظام بتحديد خصومات المستندات التي تم استهدافها بتعديل الخصومات ومساواة هذه الخصومات بالصفر.

### نظام مقاوالت التركيبات
- **عرض سعر مقاوالت:** تم تصغير المسافة بين الـ scroll وال Grid.
- **الشروط:** تم إضافة الخيار "يمكن تعديل المرحلة".
- في كل من عرض أسعار مقاوالت، العقد، المستخلص: تم إضافة جدول دفعات ونموذج دفعات مثل الموجود في مستندات الـ Supply Chain.
- في كل من عرض أسعار مقاوالت، مقايسة: تم إضافة جريد للشروط حيث أنه من المحتمل تغيير الشروط وبالتالي ال يمكن تعريف الشروط داخل ملف البنود القياسية.

### نظام الموارد البشرية
- **بوليصة التأمين (السيارات):** تم تحسين البوليصة بحيث عند اختيار عرض التأمين أن يتم ملء كل من الحقلين (تأمين السائق، تأمين الراكب).
- **سند حذف سيارة للتأمين:** تم إضافة بعض الحقول لسند الحذف مثل (إضافة تأمين سائق، إضافة تأمين ركاب...الخ) يعمل بطريقة مشابهة لسند اإلضافة.
- تم إضافة خيار جديد لمفرد الراتب وهو "إعادة توزيع كامل القيمة على فترات العمل الكاملة"، يعمل هذا الخيار على توزيع قيمة المفرد على أيام العمل نسبة وتناسب وال يأخذ في االعتبار أيام اإلجازة بدون مرتب أو أيام عدم العمل.
- **تصفية المستحقات:** تم إضافة حقل تخصم من مدة األجازة مدفوعة األجر في التصفية (`dedFromPaidVacPeriodInDues`) ويكون مفعل في حالة عدم تفعيل الخيار بدون مرتب.
- تم إضافة الحقلين التاليين في مستند التصفية:
  - األجازات السنوية بمرتب (`annualVacationWithSalary`) ويشمل اإلجازات ذات أنواع بمرتب (أوبشن بدون مرتب غير مفعل) وأيضاً تخصم من مدة اإلجازة مدفوعة األجر في التصفية يكون مفعل.
  - صافي مدة اإلجازة مدفوعة األجر كما هو مطلوب (`netPaidVacationPeriod`).
- تم إضافة الخيار "اعتبار األذون عند حساب الوقت اإلضافي" إلى إعدادات الرواتب.
- تم إضافة الخيار "معالجة التداخل بين الحضور واالنصراف واألذون بحيث يكون تكون األولوية لألطول وقتاً" إلعدادات الرواتب واألولوية يكون ترتيبها كالتالي:
  - المأموريات
  - ملف الحضور واالنصراف
  - أذون االنصراف
  - اإلجازات الجزئية (نصف يوم وربع يوم وما إلى ذلك)
- ويمكن التحكم في هذه األولويات من اإلعدادات التالية بوضع ترتيب (من 1 إلى 4):
  - أولوية المأموريات عند التداخل
  - أولوية األذون عند التداخل
  - أولوية الحضور واالنصراف عند التداخل
  - أولوية اإلجازات الجزئية عند التداخل
- تم إضافة الخيار "إعادة توزيع كامل القيمة على فترات العمل الكاملة" إلى ملف مفرد الراتب.
- تم عمل حقل إجمالي على السطر وجعله متاح للمستخدم تعديله وتم تعديل العملية الحسابية أيضاً باالعتماد على اإلجمالي.
- تم إضافة الخيار "إعادة توزيع كامل القيمة على فترات العمل الكاملة" إلى نوع مفرد الراتب.
- تم إضافة الحقل "تاريخ إنتهاء العقد" في كل من المستندات التالية:
  - العرض الوظيفي
  - العرض الوظيفي المجمع
  - تحديث بيانات الموظف
  - شاشة الموظف
- **سند افتتاحي مخصصات موظف:**
  - تم التحسين بحيث يكون القيد الطرف الدائن في المفرد، ويكون الطرف المدين هو الذي يتم اختياره في المستند.
  - مطلوب أوبشن في التوجيه (بدون تأثير محاسبي).
- تم تعديل حسابات المدين والدائن لمفردات الراتب وسندات الجزاء والمكافأة وأنواع الجزاء والمكافأة والتطبيق عليها في شكل الحسابات كما يوجد بالتوجيهات.
- **سند السلفة:** تم إضافة القائمة "نوع فترة القسط"، وهي (شهري، أسبوعي).
- **إعادة احتساب مخصصات:** تم إضافة التالي إلى توجيه المستند:
  - جريد في توجيه المستند يحتوي على (عدد الشهور من إلى، مضروباً في، مقسوماً على).
  - تم إضافة الخيار "بدون تأثير محاسبي".
- **العرض الوظيفي وتحديث بيانات موظف:** تم إضافة معيار على سطور المفردات.
- تم إضافة جدول به المستخدمين الذين ستظهر لهم هذه المساعدة (يمكن تحديد موظف - مستخدم - مجموعة مستخدمين - ملف صالحية)، كما تم قائمة تحوي الخيارين (سماح - منع) بحيث يمكن منع مستخدمين معينين من استعمال هذه المساعدة أو السماح لمجموعة معينة من المستخدمين (ما عدا مستخدم معين مثلاً).
- تم إضافة الخيار "عدم اعتبار الشهور األخرى عند حساب الضريبة" بمعادلة مفرد الراتب وذلك حتى ال يقوم النظام بموازنة قيمة الضريبة مع الشهور السابقة من السنة، وإنما يقوم العميل بعمل تسوية في نهاية العام.
- تم تحسين سند "افتتاحي مخصصات موظف" بحيث يتم احتساب مخصصات الموظف باأليام وليس بالشهور.
- تم إضافة زر جديد لمستند "إعادة احتساب مخصصات موظف" ليقوم بعرض النتائج قبل الحفظ.

## الإعدادات

- تم إضافة مجموعة (نسخ السطور مع بناء على) إلى التوجيه الخاص بمستندات إدارة التوزيع.
- تم إضافة جريد "محددات الدخول" في ملف المستخدم، وذلك إلعطاء أكثر من صالحية للمستخدم، كأن يحق له الدخول على شركتين.
- **ملف الصالحيات:** تم إضافة المجموعة على السطور، حيث قد يكون النوع المستهدف موجود بأكثر من مجموعة.
- تم إضافة إمكانية تعريف مستخدمين محددودي اإلمكانيات في ترخيص البرنامج.
- تم إضافة (قالب اسم ملف التقرير) إلى تعريف تقرير.
- تم نقل األزرار الخاصة بتصفح التقارير في منتصف الشاشة إلعطائها أفضلية.
- تم إضافة الخيار "السماح بتحميل المرفقات دون الحاجة إلى التسجيل في نما" إلى اإلعدادات العامة.

## الأخطاء

### نظام المخزون
- في بعض األحيان، ال يقوم النظام بإضافة الضرائب إلى تكاليف االستالم اإلضافية بشكل سليم.
- اإلجراء `CollectBoxsWithoutQuestions` و `CollectBoxs` ال يعمل بشكل صحيح حيث بعد تجميع الكميات ينسخ رقم الـ box في رقم ال lot ويرفض حفظ المستند.
- **إنهاء الجرد المخزني:** عند عمل انهاء جرد لمستند يقوم بحساب الكميات بناء على التاريخ فإن النظام أحياناً ال يسمح بعمل سندات مخزنية بالرغم من أن حالة إنهاء الجرد منتهي أو منهي ومفعل.

### نظام المبيعات
- في بعض األحيان تظهر قيمة الضريبة خاطئة.

### نظام المشتريات
- يحدث خطأ أحياناً عند حفظ فاتورة مشتريات كمسودة.
- عند عمل فاتورة مشتريات وبالضغط على تجميع سندات الصرف، ال يقوم النظام بتجميع السندات التي تم إصدارها على المورد المطلوب، ويقوم النظام بإظهار خطأ.

### نظام األصول الثابتة
- **مستند افتتاحي أصل ثابت:** عند االختيار من مجموعة إلى مجموعة، يقوم النظام باقتراح جميع مجموعات البرنامج، والمفترض عرض مجموعات األصول فقط.

### اإلعدادات
- **اإلعدادات العامة:** عند تفعيل أوبشن (إذا وجد دفتر واحد لمستند يتم استعماله مباشرة عند انشاء جديد) يعمل ذلك على الدفتر والتوجيه حتى وإن كان الخيار (إذا وجد توجيه واحد لمستند يتم استعماله مباشرة عند انشاء جديد) غير مفعل.
- ال يتم عرض ال tooltip إال في حقول المراجع والسطور ولكن حقل الكود مثلاً أو االسم ال يعمل به المساعدة السريعة.
- عند تشغيل تقرير يحتوي على هايبر لينك يشير إلى تقرير غير موجود أو بارامتر غير موجود بالتقرير المشار اليه، ال يتم تشغيل التقرير األساسي ويظهر خطأ. والصواب هو تجاهل هذا التحقق وتشغيل التقرير األساسي وعند استخدام الهايبر لينك فقط يتم إظهار الخطأ.

### نظام الموارد البشرية
- **مفرد الراتب:** تم عدم السماح بتخزين سجل "مفرد الراتب" إذا كان المستخدم قد قام بتعليم الخيار "غير مرتبط بأيام العمل".
- ال يأخذ النظام في اعتباره المحددات الخاصة بسند مكافأة/جزاء.
- يظهر النظام ال يمكن إصدار الراتب ألن الموظف خارج مجال اإلصدار في حين أن الموظف ينتمي لمجال إصدار الراتب.
- في بعض األحيان، عند إصدار الرواتب يظهر خطأ ال يمكن تنفيذ العملية. يتم حلها عن طريق تفعيل الخيار `HandleOverlapBetweenAttendanceAndMissions`.
- عند إعادة احتساب مخصصات تظهر رسالة ال يمكن تنفيذ العملية.
- يوجد أكثر من موظف حالته في إجازة ولكن خالل الشهر كان له أيام عمل وعند عمل تجميع موظفين في سجل الراتب ألحد الشهور ال يتم تجميع الموظفين هؤالء الموظفين على الرغم من أنه لم يتم تفعيل الخيار "تجميع الموظفين على رأس العمل فقط".

### نظام نقطة البيع
- يظهر خطأ عند وضع قيمة في حقل وقت عمل الوردية (`workShiftTime.value`).
- في نقل بيانات الصنف إلى نقطة البيع حيث أن الباركود موجود بالصنف وال يتم نقله إلى نقطة البيع.
- في ترحيل قيم فواتير نقاط البيع إلى نما يحدث خطأ أحياناً.
- إذا تم تفعيل أن للصنف إصدارات وعمل قوائم أسعار بإصدارات واختيار صنف بدون اختيار اإلصدار في قائمة السعر فإن اإلصدار تنقل إلى نقاط البيع بـ Null وعليه في نقاط البيع ال يحضر سعر الصنف بدون رقم اإلصدار.

### نظام التصنيع
- **سند المورد:** ال يتم نسخ الضريبة على السطر من السياسة الضريبية سواء من التوجيه أو مورد التشغيل أثناء اإلدخال. تم ضبطها كما في سند التكاليف أو سند المصروف في االعتمادات بحيث تعمل بمجرد إدخال المورد على السطر.
- في بعض األحيان، في مستند أمر إنتاج عند اختيار عملية التشغيل يظهر الخطأ (ال يمكن تنفيذ العملية).

### نظام مراكز الخدمة
- **ملف المنتج:** يقوم النظام في البداية بحساب "متوسط استهالك الكيلو متر يومياً" بطريقة خاطئة.
- عند عمل مستند إغالق أمر شغل تظهر رسالة (ال يمكن إغالق أمر الشغل {0} ألن حالته {1}).

### خطأ عام
- يحدث أحياناً deadlock خطأ في `NamaModules.getInstance`.

</rtl>