---
lang: ar
---

# أسئلة في موديول التوزيع والمخازن والمبيعات والمشتريات 

## في حاجة من السيستم تمنع اليوزر يستلم او يشتري الصنف لو زاد عن اقصي كمية ؟؟؟ الحقل اللي موجود في الصنف
* تقدر تستعمل مسار الكيان `EAPreventQtyMoreThan`
* طبعا تقدر تعمل تحقق بناءا على معايير يقارن الكمية بالسطر بالحقل اللي في الصنف
  * عيب الحل دا ان لو الصنف مكرر التحقق هيعتبر كل سطر لوحده
  * لكن مسار الكيان دا هيجمع الأرقام مع بعض ويتأكد من الإجمالي بتاعهم
* لو عاوز الكمية تكون أقل أو تساوي حقل `defaultDetailData.maxQuantity` اللي موجود في الصنف تقدر تخلي الاستعلام كالتالي:
```sql
select {details.item.item.defaultDetailData.maxQuantity}
```
::: tip في مسار كيان تاني بيمنع الكمية تكون أقل من رقم معين
اسم العنصر في الحالة دي `EAPreventQtyLessThan` 
:::
::: tip خلي بالك الكمية اللي السيستم هيقارن بيها هي الكمية بالوحدة الصغرى
- بمعني لو انت عندك صنف فيه جرام وكيلو جرام والوحدة الأساسية (الصغرى) جرام اللي هيتم المقارنة بيه هيكون الكمية بالجرام حتى لو السند بالكيلو
- علشان كدا الأفضل تعمل المسار مع إمكانية الحفظ بحيث الكمية بالواحدة الصغرى تكون اتحسبت
:::