<div dir="rtl">

# ملاحظات إصدار نما ERP - ديسمبر 2021

::: info معلومات الإصدار
- **تاريخ الإصدار**: ديسمبر 2021
- **رقم الإصدار**: Nama-ERP-202112
- **حجم الملف**: 190.6KB
- **نوع الملف**: ملاحظات إصدار شهرية
:::

## الإضافات

### نظام المخزون
- تم إضافة عدد **10 حقول Boolean** في كل من شاشة **طلب التجميع** و شاشة **سند التجميع**
- تم تطوير آلية في سند التجميع عند تغيير الطريقة يقوم بإعادة فرد الطريقة الجديدة وحذف السطور القديمة في سند التجميع واعتبار الكميات واحتسابها مرة أخرى
- لدعم هذه الآلية، تم تطوير مسار الكيان `EARegenAssemblyDocumentDetailsFromBOM`، والذي يمكن استعماله في مسار كيان يدوي - مع التعليم على الخيار "يتطلب الحفظ مع التنفيذ يدوياً" ثم إضافته لعرض القائمة لسندات التجميع

### نظام المشتريات
- **نافذة عرض أسعار مشتريات**: تم جعل الـ description في الهيدر **10** بدل من **5** وجعل الـ text.details أكثر بإضافة **7** ليصبح **10** هو الآخر
- **طلب تعديل بيانات مورد**: تم إضافة التعديلات التالية:
  - تم إضافة الحقل **"نوع التحديث"** ليحتوي الخيارين (إضافة جديد، تحديث الموجود) بحيث إذا تم استخدام الزر "تحديث بيانات المورد" مع الخيار الأول، يقوم النظام بإضافة مورد جديد وإذا تم اختيار الخيار الثاني يقوم النظام بتحديث المورد الموجود بالمستند
  - إظهار التاريخ الفعلي وتاريخ التحرير ليصبح شبيهاً بمستندات النظام
- **ملف المورد**: تم إضافة قائمة بطلبات تعديل بيانات الموردين بنافذة إحصائيات
- **فاتورة المشتريات**: في الصفحة الخاصة بسندات الدفع، تم عرض الإشعارات (عند الدفع عن طريق إشعارات) التي تخص ذمة المستند فقط

### نظام المبيعات
- تم إضافة الخيار **"عدد الأيام للسماح بإنشاء مستندات مستقبلية"** في ملف إعدادات الضرائب
- **طلب تعديل بيانات عميل**: تم إضافة التعديلات التالية:
  - تم إضافة الحقل **"نوع التحديث"** يحتوي الخيارين (إضافة جديد، تحديث الموجود) بحيث إذا تم استخدام الزر "تحديث بيانات العميل" مع الخيار الأول، يقوم النظام بإضافة عميل جديد وإذا تم اختيار الخيار الثاني، يقوم النظام بتحديث العميل الموجود بالمستند
  - إظهار التاريخ الفعلي وتاريخ التحرير ليصبح شبيهاً بمستندات البرنامج
- **ملف العميل**: تم إضافة قائمة بطلبات تعديل بيانات العملاء بنافذة إحصائيات

### نظام الحسابات
- تم إضافة توجيه لكل من المستندين التاليين:
  - أمر شراء متنوعات
  - طلب شراء متنوعات
- **حقيبة الحسابات**: تم إضافة الخيار **"عدم نسخ حسابات الحقيبة للذمة"**
- **فاتورة متنوعات**: في الصفحة الخاصة بسندات الدفع، تم عرض الإشعارات (عند الدفع عن طريق إشعارات) التي تخص ذمة المستند فقط

### نظام إدارة المشروعات
- **تنفيذ المهام**: يقوم النظام بإنشاء مستند إجراء بالرغم من عدم وجود بيانات بالحقل "الإجراء القادم"
- تم إضافة الخيار **"إنشاء تأثير محاسبي للسطور التي ليس لها بند مصروف"** إلى توجيه فاتورة المشروعات

### نظام إدارة المستندات
- تم إضافة ملف جديد بالاسم **"إضافة ملف مضغوط إلى مستندات أرشيفية"**
- **موضوع المستند**: تم إضافة كل من المجلد والأرشيف (الموقع) إلى ملف "موضوع مستند"
- **موضوع المستند**: تم ضبط الملف بحيث عند اختيار الموضوع في المستند الأرشيفي، يتم الفلترة على المواضيع التي لها نفس الأرشيف أو بدون أرشيف ونفس الأمر بالنسبة للمجلد

### نظام المقاولات
- **عقد مقاول باطن**: تم إظهار كل من (رقم المستخلص، نوع المستخلص، الصافي بعد الضريبة، وإجمالي المستحق) في مستخلصات عقود مقاول الباطن المعروضة
- **طلب صرف خامات مقاولات**: تم إضافة **5 مرفقات** برأس المستند
- **فاتورة شراء مستلزمات مقاولات**: في الصفحة الخاصة بسندات الدفع، تم عرض الإشعارات (عند الدفع عن طريق إشعارات) التي تخص ذمة المستند فقط
- تم إضافة الخيار **"عدم تجميع الشرط عند تجميع الشروط في المستخلص"** في نافذة الشرط القياسي
- تم تحسين مستخلصات المقاولات بحيث عند تطبيق الشروط، يتم استحضار صافي قيم الشروط بعد تطبيق الضريبة
- في كل من **الموازنة التقديرية** و**الموازنة التنفيذية**، تم إضافة الأزرار التالية:
  - تحويل لعقد
  - تحويل لعقد مقاول باطن
  - تحويل لعقد بالسطور المختارة فقط
  - تحويل لعقد مقاول باطن بالسطور المختارة فقط
- **مستخلص مشروع**: تم إضافة الحقل **"إجمالي التكلفة"** برأس المستند ليكون عبارة عن مجموع تكلفة جميع البنود المدرجة بالمستند
- تم إضافة مستند جديد بالاسم **"تسكين موظفين ومعدات علي مشروع"**
- تم إضافة مستند جديد بالاسم **"توزيع تكاليف الموظفين والمعدات على المشاريع"**
- تم إضافة الخيار **"السماح بتعديل تفاصيل المستخلص إذا كان بناءً على حصر كميات"** في توجيه كل من المستندين "مستخلص مشروع"، "مستخلص مقاول باطن"
- تم ربط الراتب بالمقاولات في بنود التكلفة
- **طلب تعديل بيانات مقاول**: تم إضافة التعديلات التالية:
  - تم إضافة الحقل **"نوع التحديث"** يحتوي الخيارين (إضافة جديد، تحديث الموجود)
  - إظهار التاريخ الفعلي وتاريخ التحرير ليصبح شبيهاً بمستندات البرنامج

### نظام الاستثمار العقاري
- تم إضافة مستند بالاسم **"تسليم وحدة"**

### نظام خدمة العملاء
- تم إضافة جدول **"بنود العقد"** إلى مستند عقد الصيانة
- تم إضافة حقول **"بنود العقد"** وهي (مستوى المشكلة، وصف المشكلة، وقت الاستجابة، ملاحظات 1، ملاحظات 2) إلى كل من المستندات التالية:
  - **بلاغ الصيانة**: حيث يمكن أن يبحث عنها المستخدم من عقد الصيانة الخاص بالبلاغ
  - **أمر الصيانة**: حيث يستحضرها النظام من حقل "بلاغ الصيانة" الخاص بأمر الصيانة
  - **تنفيذ أمر الصيانة**: حيث يستحضرها النظام من حقل "أمر الصيانة" الخاص بمستند التنفيذ
- تم إضافة الحقلين (**نوع آلة**، **تصنيف آلة**) برأس المستند إلى كل من المستندات التالية:
  - زيارة صيانة، عقد صيانة، مردود فاتورة صيانة، فاتورة صيانة، خطة عمل صيانة، مقايسة صيانة، بلاغ صيانة، أمر صيانة، معاينة قبل التركيب
- في جميع المستندات المذكورة بالنقطة السابقة (في صفحة قطع الغيار والخدمات)، تم تعديل البحث عن قطع الغيار في جدول قطع الغيار بحيث يقوم النظام باستحضار قطع الغيار الموجودة بنوع الآلة المذكور في المستند
- تم إضافة **خمسة تصنيفات** إلى مستند "أمر شغل صيانة". يتم إظهارها عن طريق تعديل الشاشة
- تم إضافة مستند جديد بالاسم **"تحديث بيانات الآلة"**
- تم إضافة الملفات التالية:
  - تصنيف آلة 1، تصنيف آلة 2، تصنيف آلة 3، تصنيف آلة 4، تصنيف آلة 5
- **شاشة الاستبيان**: تم إضافة عدد **10 حقول Boolean**
- **عقد الصيانة**: في تفاصيل الآلات، تم إضافة **7 حقول** خاصين بنوع الزيارة (نوع زيارة 1، نوع زيارة 2، الخ) وهو عبارة عن قائمة تحتوي الخيارات (يومي - أسبوعي - 15 يوم - شهري - سنوي - كل 3 شهور - 6 شهور)
- **خطة عمل صيانة**: تم إضافة الزر **"تجميع الآلات التي لها نفس مواعيد الزيارة المحددة"** بحيث يقوم بتجميع الآلات بناءً على الفلتر ويتم اعتبار (الغرفة أو المبنى أو الطابق) في التجميع
- **تنفيذ أمر صيانة**: تم إضافة عدد **2 مرفق** على السطر على مستوى كل مهمة في تنفيذ أمر صيانة في الجريد الخاص بالمهام

### نظام الأصول الثابتة
- **فاتورة شراء أصل**: في الصفحة الخاصة بسندات الدفع، تم عرض الإشعارات (عند الدفع عن طريق إشعارات) التي تخص ذمة المستند فقط

### نظام إدارة الموارد البشرية
- تم التحسين بحيث يمكن تحديد مفردات بعينها في معادلة الضرائب (أو مجموعة مفردات) ويتم اعتبار قيمها فقط في وعاء الضريبة، وبعدها يمكن عمل مفرد آخر (بترتيب أعلى) لحساب الضرائب
- تم إعادة حساب الضريبة والتي تتضمن إعادة حساب الضريبة بداية من الصرفية الثانية بشكل تكميلي لشرائح الضريبة في الصرفية الأولى

### نظام نقاط البيع
- تم تحسين **قائمة البحث** - والتي يتم الوصول إليها عن طريق المفتاح **F12** - بحيث تعمل بنفس فكرة عمل الأصناف المفضلة
- تم التحسين بحيث يتم التعامل مع فاتورة الخدمة مثل الفاتورة العادية إذا لم يوجد توجيه خاص بفاتورة الخدمة

### الإعدادات
- تم إضافة الزر **"نقل الموافقات إلى الموظف المفوض"** في قائمة المزيد بشاشة التحرير وعرض القائمة الخاصة بنافذة التفويض
- تم إضافة الخيار **"تجاهل سطور الأصناف التي لها الكود الضريبي التالي"** إلى إعدادات مصلحة الضرائب
- في شاشة **Tasks Pending**، تم إضافة الخيار **"إعادة تنفيذ المهام المختارة"** في قائمة المزيد
- **مستند إرسال مستندات الي مصلحة الضرائب**: تم إضافة الحقلين "تجميع المستندات من تاريخ"، "تجميع المستندات إلى تاريخ"
- **الإعدادات العامة**: تم إضافة الحقل **"قائمة أنواع"** إلى جريد "إضافة المستندات الأرشيفية إلى"
- تم إضافة الخيار **"السماح بطباعة المسودات"** على مستوى توجيه المستند

## الأخطاء

### نظام المخزون
- عند عمل لجنة جرد نقطة بيع واختيارها في التفاصيل في لجنة جرد مخزني ثم الضغط على الزر إنشاء سطور لجنة جرد مخزني تظهر الرسالة "لا يمكن تنفيذ العملية"
- عند حفظ سند بدء جرد دون إدخال توجيه المستند، يظهر خطأ برسالة غير معبرة. تم تصحيح الرسالة
- **قائمة الأسعار**: عندما يتم إضافة نفس الصنف باختلاف المحددات بأسعار مختلفة، تظهر الرسالة "السطر رقم 2 مكرر مع السطر رقم 1"
- عند عمل نسخة مماثلة للسطر عن طريق الاختصار (Shift + Insert)، يقوم النظام بنسخ المرفق - إذا وجد بالسطر المنسوخ - ثم بعد ذلك يقوم النظام عند تعديل أحد المرفقين بإجراء نفس التعديل بالمرفق الآخر

### نظام المشتريات
- عند إصدار فاتورة المشتريات بناءً على أمر شراء، ثم إصدار سند تكاليف إضافية بناءً عليها، إذا قام المستخدم بإعادة اختيار أمر الشراء مرة ثانية وحفظ الفاتورة، يقوم النظام بحذف قيد التكلفة الإضافية
- في طلب تعديل بيانات المورد، عند اختيار نوع التحديث "تحديث الموجود" واختيار مورد معين، تظهر الرسالة "لا يمكن تنفذ العملية"

### نظام المبيعات
- عند اختيار سند تجميع في سطر فاتورة المبيعات من خلال الحقل "تم النسخ من سند"، يقوم النظام باستحضار الصنف الصحيح لكن يتم حذف سند التجميع تلقائياً بعد ذلك من الحقل "تم النسخ من سند"
- عند تعليم الخيار الخاص بإدراج التوجيه الوحيد تلقائياً، يقوم النظام بإدراج التوجيه بالمستند ولا يقوم بتفعيل الخيارات الخاصة بالتوجيه بهذا المستند
- لا يسمح النظام بعمل مردود مبيعات يتم إرساله إلى الضرائب وترك الحقل "بناء على" فارغاً

### نظام الأصول الثابتة
- **سند الإهلاك**: عند اختيار التاريخ ومجموعة الأصل ثم اختيار من قطاع إلى قطاع والضغط على تجميع الأصول لا يتم استحضار الأصول، لكن عند اختيار التاريخ ومجموعة الأصل وتحديد القطاع من المحددات ثم الضغط علي زر تجميع الأصول يتم استحضار الأصول

### نظام المقاولات
- لا يسمح النظام بعمل **recommit** لسند حصر التكاليف لمعالجة الفروق في التكلفة. لحل هذا الخطأ تم تطوير الـ **utility** التالية:
  ```
  http://localhost:8080/erp/test?util=com.namasoft.modules.contracting.domain.utils.util.RecalculateCostExecutionAndUpdateProjExtractCostsUtil
  ```
- **عقود المقاولات**: عند إضافة عقد مشروع يحتوي على عدد كبير من البنود (250 بند مثلاً) فإنه عند التعديل على الكمية أو الوحدة يأخذ النظام وقتاً طويلاً للتعديل
- يقوم النظام بتكويد البنود بطريقة خاطئة بكل من الموازنة التنفيذية والموازنة التقديرية

### نظام إدارة الموارد البشرية
- في بعض الأحيان، عند مباشرة الموظف العمل أثناء الشهر، لا يتم احتساب مفردات المرتب بطريقة صحيحة
- عند عمل عرض وظيفي أو تحديث بيانات موظف فإن البيانات التالية لا يتم إضافتها الى الموظف:
  - empRate، overTimeRate، vacationDayRate، hourlyWorkCost
- عند عمل سند موافقة على مؤشر إضافي يوم عطلة، يتم معها إضافة عدد ساعات الإضافي في اليوم العادي إلى الموظف مع العلم أنه لم يتم عمل سند موافقة للمؤشر إضافي يوم عمل
- يظهر خطأ أحياناً عند محاولة حفظ سند راتب
- يظهر خطأ أحياناً عند محاولة حفظ سجل راتب
- في بعض الأحيان، لا يمكن حذف سند مباشرة عمل
- عند الضغط على المأموريات في إحصائيات الموظف لاستعراض المأموريات الخاصة به تظهر الرسالة "لا يمكن تنفيذ العملية"
- **نافذة الموظف**: قائمة العرض (View List) الخاصة بالإجازات تعرض معلومات رصيد خاطئة
- **نافذة تعديل رصيد إجازة**: يقوم النظام بعرض قيمة خاطئة بالحقل "المتبقي الحالي"
- **سند إجازة مجمع**: في بعض الأحيان، لا يقوم النظام بحساب الرصيد بشكل صحيح للموظف

### نظام التصنيع
- في بعض الأحيان، عند تعديل بعض مستندات النظام مثل أمر الإنتاج، تظهر الرسالة "لا يمكن تنفيذ العملية"

### نظام البنوك
- **مستند إصدار خطاب ضمان**: لا يأخذ النظام رسوم الإصدار في الاعتبار عند حساب الضريبة حيث لا يقوم بإضافة رسوم الإصدار على الضريبة
- **مستند إصدار خطاب ضمان**: لا يقوم النظام بإدراج الضريبة آلياً بالحقل "ضريبة مبيعات 1" بمجرد تحديد توجيه المستند من خلال السياسة الضريبية التي تم تحديدها بتوجيه المستند
- **مستند التحويل البنكي**: يقبل النظام بعمل تحويل بنكي بناءً على طلب صرف بأكبر من قيمته ويصبح المتبقي من طلب الصرف رقماً سالباً

### الإعدادات
- تم جعل البادئة الخاصة بالرقم المسلسل للقيود النظامية تعمل بطريقة **Tempo**
- يحدث الخطأ "لا يمكن تنفيذ العملية" عند تشغيل لوحة رسوم بيانية من نوع **calendar**
- عند عمل دفتر إيصالات يتكون من **2000 إيصال** أو أكثر، يقوم النظام باستغراق مدة كبيرة في التحميل حتى ينشئ هذه الإيصالات

### نظام الأصول الثابتة
- **أمر شراء أصول**: بعد إضافة سياسة الضريبة في التوجيه، عند التعليم على كل من الخيارات "خاضع للضريبة"، "السماح بتعديل ضريبة الفاتورة في السطر"، "يمكن تعديل الضريبة"، يقوم النظام مع حفظ التوجيه بجعل قيمة الحقول السابقة تساوي **False**

### نظام المقاولات
- **فاتورة شراء المقاولات** لا تقوم بإصدار قيود في أحد الإصدارات
- بعد تغير سياسة تجميع الشروط في مستخلص مقاول الباطن بحيث يتم التجميع بالمبلغ شامل الضريبة، لا يقوم النظام بحفظ مستند المستخلص

### نظام المستشفيات
- **فاتورة الإقامة**: لا يمكن عمل جانب محاسبي على مرجع 1 الموجود داخل الغرفة على مستوى السطر

### نظام نقاط البيع
- عندما يكون المستخدم له صلاحيات كاملة، لا يقوم النظام بإعطاء الصلاحيات الجديدة للمستخدم تلقائياً
- عند استخدام الـ **pole display** ودفع فاتورة تختفي رسالة الباقي سريعاً ولا يتمكن المستخدم من رؤيتها وتأتي رسالة الترحيب للفاتورة الجديدة سريعاً
- في نظام نقاط البيع عند اختيار الخيار "استخدام سندات حجز اوردر" من إعدادات نقاط البيع، لا يمكن الدخول على نقطة البيع
- عمود تاريخ الإنشاء في نقاط البيع لا يظهر البيانات بشكل صحيح

### نظام نقاط البيع
- **مستند عقد خدمة**: يطلب النظام الوحدة وكذلك رقم البطاقة الشخصية والكيان القانوني للعميل على الرغم من تواجدهم داخل العميل

### الجيوي الجديد
- أخطاء نقاط البيع (صفحة أخطاء الماكينة في شاشة الماكينة) لا تظهر بشكل صحيح عند عرضها في الشكل الجديد
- تم تحسين داشبورد الجدول بالواجهة الجديدة

</div>