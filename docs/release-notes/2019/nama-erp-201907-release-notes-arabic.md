<rtl>

::: info معلومات الإصدار
**تاريخ الإصدار:** يوليو 2019  
**رقم الإصدار:** 2019.07
:::

# ملاحظات الإصدار - يوليو 2019

## **الإضافات**

### **نظام المخزون**
- داخل الصنف في صفحة الأسعار، الإحصائيات الخاصة بقوائم السعر وعروض الأسعار الموجودة أسفل الصفحة تعمل بصورة صحيحة مع قوائم الأسعار ولكن في الجزء الخاص بالعروض لا تكون النتائج صحيحة
- بمسار الكيان `com.namasoft.modules.supplychain.domain.utils.plugnplay.EAGenSCDocFromDocWithFieldsMap`، يتم إنشاء فاتورة مشتريات من سند الصرف المخزني بصنف الخدمة الموجود داخل سند الصرف. تم إضافة إمكانية إضافة الصنف المجاني بجانب الصنف الخدمي (حقل `text`) على مستوى السطر
- في **سند التجميع** في صفحة بنود المصروفات، تم إضافة 5 `number` على مستوى السطر
- **ملف ماكينات التجميع**: تم إضافة الصفحتين التاليتين:
  - **المواد الخام**: بها نفس سطور "المواد الخام" بمستند "سند معالجة"، بحيث يتم إدراج السطور تلقائياً عند اختيار الآلة داخل سند المعالجة
  - **المخرجات**: بها نفس سطور "المخرجات" بمستند "سند معالجة"، بحيث يتم إدراج السطور تلقائياً عند اختيار الآلة داخل سند المعالجة

### **نظام المبيعات**
- الخيار `عدم نسخ مخزن رأس المستند من بناءً على` بتوجيه فاتورة المبيعات، تم تعديله بحيث يقوم أيضاً بعدم نسخ الموقع بالإضافة لعدم نسخ المخزن
- تم تفعيل الخيارات الموجودة باسم `احتساب نسبة خصم 1 من القيمة` لتعمل مع الإدخال وليس مع الحفظ فقط، كما لا يمكن عمل الخيارات على الخصم الرئيسي لما قد يسببه من مشاكل كثيرة
- تم إضافة الحقول التالية بتفاصيل العروض وهي كالتالي:
  - يطبق عندما يكون إجمالي الصنف على السطر أقل من أو يساوي
  - يطبق عندما يكون إجمالي الصنف على السطر أكبر من أو يساوي
  - قسم الصنف
- الحقلان الجديدان بنافذة العروض (أقل من أو يساوي - أكبر من أو يساوي)، يمكن أن يضع المستخدم نفس القيمة في سطرين كأن تكون 100 - 110 في أحد السطور و 110 - 120 في السطر الآخر وبالتالي يحدث تداخل. تم التحديث بحيث يكون الحقلان (أكبر من أو يساوي، أقل من)
- تم إضافة 5 حقول مراجع (`ref`) لشاشة **أمر البيع**
- **أمر البيع - صفحة التوصيل**: تم إضافة جريد "معلومات الشحن"
- تم إضافة الخيار `البحث في المراجع بالاسم متصل` بالإعدادات العامة وذلك لإلزام المستخدم بأن يضع المستخدم العلامة "%" بدلاً من المسافات. وبالتالي مع عدم اختيار هذا الخيار يمكن البحث مع وجود مسافات
- تم إضافة الخيار `تحديث خصومات السطور من العروض عند الحفظ` في توجيه المبيعات لإمكانية تحديث الخصومات لكل السطور بعد الانتهاء من الفاتورة حيث أنه مع الإدخال يحدث بعض المشاكل نظراً لتغير إجمالي الفاتورة مع إدخال كل سطر
- تم إضافة العمودين `أكبر من أو يساوي`، `أقل من` بصفحة العروض والخاصة بخصومات الأصناف

### **نظام التصنيع**
- تم إضافة مرفق إلى **مكونات منتج**

### **نظام الاستثمار العقاري**
- تم إنشاء **سند إعفاء إيجار** بحيث يكون مسئول عن إعفاء شهر أو أكثر لوحدة مؤجرة بعقد ساري لمالك محدد
- تم عمل **سند تحصيل مجمع لعقود الإيجار** بحيث يتم إدراج جميع الأقساط التي حل ميعاد تحصيلها ولم تحصل بعد

### **نظام المقاولات**
- تم إضافة الخيار `دمج جداول كارت التحليل في جدول واحد` إلى إعدادات المقاولات
- تم إضافة الخيار `منع التكويد الآلي لكود البند التحليلي` في إعدادات المقاولات
- تم إضافة الخيار `السماح بإنشاء كارت تحليل بدون عقد أو مقايسة` في إعدادات المقاولات
- تم إضافة إمكانية التكويد الآلي لبنود كارت التحليل عند عمل كارت التحليل بناءً على المقايسة وليس العقد فقط

### **نظام الموارد البشرية**
- تم ضبط الأداة الخاصة بإعادة حساب رصيد الإجازات وهي `https://drive.google.com/file/d/14Erkp0CQzImlZr_ExX4sNTMqIIPmMQgR/view?usp=sharing` بحيث تقوم بطباعة رسالة خطأ واضحة عند حدوث خطأ
- تم إضافة الخيار `السماح بإصدار الراتب إذا وجد أيام عطلة رسمية وسط إجازة` إلى إعدادات الموارد البشرية
- تم إضافة مرفق إلى كل من المستندات (**طلب تأشيرة خروج وعودة**، **طلب استلام جواز**)
- تم إضافة الحقول (الخيار `يستخدم في تقريب الراتب`، طريقة تقريب الراتب، التقريب إلى أقرب) إلى نافذة **مفرد راتب**
- **إعدادات الموارد البشرية**: تم إضافة `Calendar HR` لسطور التأمينات الاجتماعية. بحيث يمكن تحديد نسب التأمينات حسب التقويم الذي يتم صرف الراتب عليه. مثال إذا كان التقويم شهري، تكون نسبة حصة العامل 20%، أما إذا كان التقويم أسبوعي، تكون نسبة حصة العامل 5%
- تم إضافة حقلين في معادلة مفرد الراتب `أقل قيمة للمعادلة` و `أقصى قيمة للمعادلة`
- تم إضافة الحقل `التأثير على الإجازة الأخرى بمعدل` بملف "نوع الإجازة" وذلك حتى يتم التأثير على إجازة أخرى بنسبة محددة. كمثال على ذلك، يمكن ضبط الإجازة المرضية بحيث تقوم بخفض (50%) نصف يوم من الإجازة السنوية

### **نظام نقطة البيع**
- تم إضافة الحقل `طريقة نسخ المحددات` لسطور قسائم الخصومات في العروض (من الفاتورة - من العرض)

### **نظام الحسابات**
- تم إضافة النوع `Column Grouped And Stacked` لعناصر اللوحة
- في الكاشير عند عمل سند فتح وردية وعمل سند قبض أو أي عملية ثم عمل إغلاق وردية فإن السطور الموجودة في الإغلاق تختفي عند الحفظ وبالتالي لا يظهر قيد

### **نظام الأصول الثابتة**
- تم منع المستخدم من إصدار **سند إضافة واستبعاد** لأصل بفترة إذا لم يتم إصدار سند إهلاك له في هذه الفترة

### **تقارير النظام**
- تم تعديل تقارير الإجازات (`014HRS-SYSR`، `013HRS-SYSR`). حيث تم منع إظهار الإجازات الغير محفوظة

### **الإعدادات**
- تم إضافة الخيار `أقصى مدة بالثواني لتنفيذ استعلامات عرض اقتراحات المراجع` إلى الإعدادات العامة
- تم إضافة الجريد "حقول البحث الإضافية عند البحث عن مرجع" إلى إعدادات الحقول والشاشات
- تم تعديل مسار الكيان `EAWordTemplate` بحيث يتم جلب ملف المورد من حقل يتم تحديده في المدخل الثاني. كمثال لطباعة الفاتورة حسب المرفق الموجود بالعميل يمكن للمستخدم استعمال: `customer.attachment`
- بنافذة معلومات الحقل `Field Info` والتي يتم فتحها من قائمة المزيد عن طريق الاختصار (`CTRL+Alt + X`)، تم إضافة الصيغ التالية لتسهيل نسخها بعمل التقارير بهذه النافذة:
  - `NamaRep.name("اسم الحقل بالعربي","Field Name English")`
  - `$F{Column}`
  - `NamaRep.translate($F{Column})` إذا كان ليس فيه `_id`
- تم إضافة جدول "حقول البحث (تستعمل لحقل البحث عن)" إلى تعديل شاشة في صفحة تعديل قائمة الاختيار
- تم إضافة الإجراءين (مراجعة، إلغاء مراجعة) بأنواع الإجراءات بنافذة مسار الكيان
- تم إضافة تاريخ جديد إلى مدير التراخيص - `Download Release Allow Temporary Until` بحيث يمكن للتجهيز والدعم تحميل الإصدار لدى البرنامج إذا كان هذا التاريخ يلي تاريخ انتهاء الدعم الفني. الغرض الأساسي هو عدم تعديل تاريخ انتهاء الصيانة عند الرغبة في فتح الإصدارات مؤقتاً للعميل
- **Dynamic Criteria was not able to render tempo syntax, the ability was added**: تم إضافة حقل جديد إلى سطور الفلتر `Tempo Use` قم بالتعليم عليه ثم استخدم الصيغة التالية في حقل `Dynamic Criteria`:
  ```
  {loop($currentUser.employee.responsibilities)}
  section.code,Equal,{$currentUser.employee.responsibilities.responsibility.code},OR; 
  {endloop}
  ```
- **تعديل شاشة - صفحة التقارير**: تم إضافة الخيار "إخفاء في الأسئلة" التي بجوار كل مدخل من مدخلات التقرير
- تم إضافة الخيار `استخدام قرار إرجاع إلى الخطوة السابقة` بالإعدادات العامة
- تم إضافة الخيار `السماح بالتعديل أثناء انتظار الموافقة` بملف الموافقة
- تم عمل `Generator QR` ببيانات الدخول للمستخدم الحالي تمكن المستخدم من استخدام التطبيق وعمل `qr code scan` لتسجيل الدخول لتطبيق الهاتف

### **نظام الموبايل**
- تم إضافة الخيارات التالية:
  - عدم السماح بإنشاء سند مهمة إلكترونية إلا من خلال التطبيق
  - عدم السماح بإنشاء سند حضور/انصراف إلكتروني إلا من خلال التطبيق
  - عدم السماح بإنشاء طلب إجازة إلا من خلال التطبيق
  - عدم السماح بإنشاء طلب إذن إلا من خلال التطبيق
  - عدم السماح بإنشاء جرد إلكتروني إلا من خلال التطبيق
  - عدم السماح بإنشاء قبض إلكتروني إلا من خلال التطبيق
- تم إضافة الخيار `عدد الساعات المسموح بها قبل منع تسجيل الانصراف من خلال التطبيق` في إعدادات الموبايل بنما
- تم نقل الإعدادات القديمة الخاصة بتطبيقات الموبايل إلى إعدادات مديول الموبايل الجديدة قبل تحديث آخر إصدار

### **الجيوي الجديد**
- تم التحسين بحيث يكون البوردر الخاص بالجدول بلون مقارب للثيم المستخدم
- تم تحسين ترجمة حقول المعايير بحيث تكون مشابهة للجيوي القديم (حيث يتم وضع اسم السطر قبل الحقل إن وجد)
- تم تفعيل الاستعلامات الدورية في (`User Timed Queries`)

## **أخطاء**

### **نظام المخزون**
- **طلب التحويل المخزني**: عند تفعيل الموقع المخزني إجباري وعدم اختيار موقع مخزني افتراضي في الموقع. عند إنشاء طلب تحويل مخزني واختيار المخزن ثم الموقع المخزني على السطور، يتم تفريغ الموقع المخزني مع الحفظ وبالتالي لا يسمح بالحفظ
- في **سند التكاليف الإضافية**، لا يتأثر بالتوزيع على الوزن ولكن يعمل على الكمية فقط
- **ملف ماكينات التجميع**: تم إضافة الصفحتين التاليتين:
  - لا يعمل البحث مع بعض الحقول سواء باستخدام الماوس أو الكيبورد
  - يوجد تكرار لبعض الحقول بتفاصيل بعض النوافذ
- مع عمل نسخة من نافذة (عن طريق تعديل قائمة)، عند البحث لا تظهر إلا النسخة الأصلية. كمثال على ذلك، عند عمل نسخة من نافذة الصرف، لا تظهر بسندات الصرف المرتبطة بالصنف بصفحة الحركات حيث لا تظهر إلا سندات الصرف الأصلية، حتى إذا تم البحث بكود النسخة المماثلة للمستند يتم عرض النسخة الأصلية فقط

### **نظام المبيعات**
- عند عمل نسخة مماثلة من فاتورة تنسخ الـ `id` الخاص بالقسيمة الخاصة بالفاتورة، لا يمكن حفظ الفاتورة في النسخة المماثلة
- العروض الخاصة بقسائم الخصومات في المبيعات لا تلتزم بالقطاع ولا المحددات الخاصة بالمستند لأن السطر الخاص بالقسائم لا يوجد به قطاع أو محددات
- عند ضبط الإعدادات بحيث يتم تجميع سندات الصرف في فاتورة المبيعات وكانت وحدات الأصناف مختلفة في السندات المجمعة يتم التجميع بصورة خاطئة
- عند عمل مردود مبيعات واختيار عميل برأس المستند. في هذه الحالة، عند اختيار أحد الأصناف ثم اختيار فاتورة مبيعات على السطر (`sourceInvoice.details`)، تظهر فواتير غير خاصة بنفس العميل

### **نظام المشتريات**
- **فاتورة المشتريات**: في بعض الأحيان، عند إظهار حقل `orginDoc` على السطر وعند سحب بعض أوامر الشراء، يظهر خطأ
- **فاتورة المشتريات**: عند إظهار الحقل `orginDoc.details` على السطر ثم سحب بعض أوامر الشراء يظهر خطأ

### **نظام الحسابات**
- عند عمل طلب صرف وسند صرف بعملة أجنبية ولكن بمعامل تحويل مختلف عما تم تعريفه بأسعار الصرف، يحدث خطأ في قيمة المتبقي بسند طلب الصرف
- يقبل نما بتجميع طلبات صرف بأكثر من قيمتها في طلب صرف مجمع في الحالتين التاليتين:
  - عمل نسخة مماثلة من طلب صرف مجمع آخر
  - تعديل القيمة بالزيادة في سطور طلب الصرف المجمع
- عند إنشاء سند قبض وسداد فواتير مبيعات من خلال صفحة الفواتير ثم حذفه فإن النظام لا يحذف السطور الخاصة به في الجدول `AllManualDebtLines`

### **الإعدادات**
- عند عمل تعديل قائمة ومحاولة وضع المفضلة قبل الأساسيات، يظهر الخطأ "لم يمكن تنفيذ العملية"
- عند استيراد سجلات من `SQLImporter` في مهمة مجدولة ولم يتم العثور على موظف مثلاً فإنه تظهر رسالة `error technical` في تنبيه الخطأ، والصواب أن تظهر رسالة واضحة توضح الخطأ
- عند كتابة الإيميل من الاختصار الخاص بأيقونة المستخدم، لا يتم حفظ الإيميل المدخل بملف المستخدم
- عند تشغيل مهمة مجدولة نوعها تقرير واختيار تنسيق الملف المرفق ملف نصي، يظهر خطأ لا يمكن تنفيذ العملية
- عند حذف فئات الأصناف من الشاشات الغير مستعملة، تظل هذه الفئات موجودة في حقول البحث، والصواب حذف فئات الأصناف المختلفة من حقول البحث عند حذفها من الشاشات الغير المستعملة
- يظهر خطأ عند محاولة تغيير كلمات المرور للمستخدمين

### **نظام المقاولات**
- يقوم النظام بتجميع حصر التكاليف بطريقة خاطئة بعقد المشروع حيث مع إصدار أول حصر تكاليف يقوم النظام بإظهار الكمية المكلفة بصورة صحيحة، ومع مستند حصر التكاليف الثاني، يقوم بجمع كمية حصر التكاليف الثانية مع الكمية المتعاقد عليها
- **مستند صرف خامات مقاولات**: يحدث خطأ عند اختيار كود البند التحليلي على مستوى السطر
- لا يسمح النظام بحذف مستند "مستخلص مشروع" عند وجود مستند "حصر تكاليف المقاولات" في الحقل بناء على

### **نظام الأصول الثابتة**
- في بعض الأحيان عند افتتاح أصل ثابت، تظهر الرسالة "لا يمكن تنفيذ العملية". يظهر هذا الخطأ عند وجود أكثر من أصل بنفس الكود على شركات مختلفة ناتج عن الاستيراد من شيت إكسيل
- عند عمل مستند إلغاء مستند لأي من (**مستند إضافة أو استبعاد أصل ثابت**، **مستند تكليف اعتماد أصول ثابتة**) فإنه يتم إلغاء تأثير القيد المحاسبي الخاص به ولا يتم إلغاء تأثيره في الجدول `FAPropertiesEntry`
- **مستند تكليف اعتماد أصل** لا يؤثر في خصائص الأصل من أول مرة، ولكن مع عمل ريكومت له يتم التأثير
- عند وضع نوع أصل في مستند شراء الأصل وله عدد لا يتم فتح حقل العدد في المستند

### **نظام نقاط البيع**
- قسائم الخصومات الصادرة من العروض لا تنسخ محددات الفاتورة الصادرة منها وتصدر على العام
- لا يقوم النظام بنقل بعض سندات المصروف الموجودة في نقاط البيع لنما

### **نظام التصنيع**
- عند عمل سند ارتجاع مواد خام فإن التوريد المخزني الناتج عنه.. تكون الأصناف بدون تكلفة.. وتم إلغاء متابعة التكاليف على المخازن وتم عمل ريبروسيس ومع ذلك لم تظل الأصناف يتم إرجاعها بدون تكلفة

### **نظام الموارد البشرية**
- **سند تعديل رصيد إجازة**: إذا كان أول حركة في الإجازات هي سند التعديل فإن المستند يقوم بالحساب بشكل خاطئ
- يسمح النظام بحفظ سند إجازة به تاريخ البداية يوم 2019-7-18 وأيضاً تاريخ العودة 2019-7-18، والصواب رفض حفظ أي سند إجازة مدته صفر يوم (إلا في حالة استعمال حقل "قيمة الإجازة أقل من يوم")
- **سند السلفة**: يتم وضع تاريخ بداية السداد وعدد الأقساط ثم إنشاء الأقساط ولكن تاريخ النهاية بالمستند لا يكون مساوٍ لتاريخ آخر قسط. مثال: عند عمل سلفة تاريخ بدء السداد لها 2019-1-1 وعدد الأقساط 5، يقوم النظام بحساب تاريخ نهاية السداد بـ 2019-06-01 بدلاً من 2019-05-01

### **نظام العقارات**
- في بعض الأحيان عند عمل عقد بيع جديد والضغط على إنشاء الأقساط يظهر خطأ لا يمكن تنفيذ العملية

### **الجيوي الجديد**
- عند تغيير محددات لدخول الشركة عام إلى شركة أخرى غير العام، لا يقبل النظام ولكن يقبل بالعكس
- إذا تم الضغط على جديد في عرض القائمة الخاص بطلبات الدعم، لا يقوم النظام بتطبيق القالب ولكن إذا تم الضغط على جديد من شاشة التحرير يتم تطبيق القالب
- لا تظهر بعض البيانات عندما يكون اسم الشركة طويل، حيث يؤدي إلى عدم ظهور اسم القائمة
- قوالب القيم الافتراضية المعلم بها الخيار "يدوي" والمربوطة داخل تعديل القوائم لا تعمل
- إذا وجد مرجع اسمه طويل فإنه يظهر جزء من الاسم فقط (الجزء الأوسط)
- عند وجود داشبورد تقوم بعمل `refresh` آلياً - ثم الذهاب إلى أي مستند أو ملف - فإن الجيوي لا يتوقف عن محاولة إحضار بيانات الداشبورد
- نافذة محددات الدخول التي يتم فتحها من خلال أيقونة المحددات بأعلى الواجهة لا تحتوي الخيارات (طباعة باركود واحد، دائماً طباعة مباشرة، طباعة المستندات مع الحفظ)
- عند فتح أكثر من نافذة، إذا حدث خروج تلقائي، لا يتم الخروج من جميع النوافذ المفتوحة
- في سطور المستندات المخزنية، لا يمكن البحث في رقم الشحنة أو رقم الصندوق بالضغط دبل كليك ولا بأي وسيلة بحث أخرى إلا كتابة رقم باتش
- عند الضغط مرتين بالماوس على خانات الملفات، لا يأتي بنتائج أولية مثل الجيوي القديم
- بقوائم العرض، عند الفلترة بالدفتر أو التوجيه الخاص بفاتورة المبيعات مثلاً، يقوم النظام في البحث بعرض دفاتر (أو توجيهات) جميع السندات
- عند عمل نسخة مماثلة تحدث الأخطاء التالية:
  - لا يقوم النظام بعمل نسخة مماثلة إلا بعد الضغط عليه مرتين
  - لا يتم حذف الحقول الممنوع من النسخ (`Clear On Duplicate`)
  - الحقول التي لها خاصية (`Fields Disabled`) تظل تعمل بشكل طبيعي
- بعض النوافذ لا يظهر بها كل الأيقونات بالأعلى مثل أيقونة الإضافة مثل نافذة التنبيهات والإطلاع على التنبيهات
- عند الضغط على إلغاء المراجعة والمراجعة مع عدم اختيار سطور لا يعترض النظام
- عداد التنبيهات لا يتغير آلياً في الجيوي الجديد
- عند فتح "تغيير كلمة المرور" من داخل شاشة المستخدم - فإن كل حقول الخيارات `checkbox` تكون معلم عليها وهذا لا يحدث في الجيوي القديم
- مع عرض الليست فيو، عند اختيار عرض الكل يتجاهل النظام الخيار الموجود في الإعدادات العامة (أقصى عدد من السجلات عند عرض الكل في القوائم)

### **تقارير النظام**
- تقارير كشف الحساب بعضها لا يعمل مع الترتيب بالمدين أو الدائن مثل التقارير (`SYSR-ACC002`، `SYSR-ACC032`، `SYSR-ACC034`، `SYSR-ACC040`)
- تم تعديل المحددين (من عميل، إلى عميل) إلى (من مورد وإلى مورد) في التقريرين (`005PIV-SYSR`، `006PIV-SYSR`) لأن التقارير تخص المشتريات
- تم إجراء تعديلات بالتقرير `001SLS-SYSR`
- تم إجراء تعديلات بالتقرير `010INV-SYSR`

### **خطأ عام**
- عند تعديل حجم عرض جدول البحث لا يتم التغيير ويظل عرض الجدول كما هو

</rtl>