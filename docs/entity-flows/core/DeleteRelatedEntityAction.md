---
title: DeleteRelatedEntityAction
module: core
---


<div class='entity-flows'>

# DeleteRelatedEntityAction

**This document was generated using Claude.ai**

## Overview

This entity flow deletes related entities that were previously generated by EAGenerateEntityFromEntityAction. It uses SQL queries to find target entities and safely removes them from the system, maintaining data integrity and proper business logic during deletion.

## When This Action Runs

- **Trigger:** Manual execution or automated cleanup workflows
- **Target:** Related entities that need to be removed when source entity changes
- **Scope:** Single entity deletion based on SQL query results
- **Safety:** Uses business logic deletion to maintain referential integrity

## How It Works

### 1. Target Entity Resolution
- **SQL Execution:** Runs the finder SQL query against the database
- **Parameter Substitution:** Replaces `{fieldName}` placeholders with source entity values
- **Entity Type:** Uses specified target entity type for proper entity loading
- **ID Extraction:** Extracts entity IDs from SQL query results

### 2. Entity Retrieval
- **Database Loading:** Loads the target entity using its ID and type
- **Single Entity Focus:** Processes only the first matching entity found
- **Validation:** Ensures entity exists before attempting deletion
- **Type Safety:** Validates entity type matches the specified target type

### 3. Business Deletion Process
- **EntityMediator Usage:** Uses proper business deletion through EntityMediator
- **Validation Rules:** Applies all business rules and constraints during deletion
- **Cascade Handling:** Manages related entity deletions automatically
- **Transaction Safety:** Ensures deletion occurs within proper transaction boundaries

### 4. Result Handling
- **Success Tracking:** Returns success/failure results from deletion operation
- **Error Accumulation:** Collects any validation or deletion errors
- **Logging:** Records deletion attempts and outcomes
- **Business Logic:** Respects all entity deletion rules and permissions

## Key Design Principles

### Complementary to Generation Actions
- **Paired Usage:** Designed to work with EAGenerateEntityFromEntityAction
- **Cleanup Purpose:** Removes entities that were automatically generated
- **Lifecycle Management:** Handles complete entity generation/deletion lifecycle

### Business Logic Compliance
- **Safe Deletion:** Uses EntityMediator for proper business rule enforcement
- **Validation Respect:** Honors all deletion validation rules
- **Referential Integrity:** Maintains database consistency during deletion

## Parameters

### Parameter 1: Target Type
- **Type:** Text (Required)
- **Format:** Entity type name (e.g., "CreditNote", "PaymentVoucher")
- **Purpose:** Specifies the type of entity to delete
- **Validation:** Must be a valid entity type in the system

**Examples:**
- `CreditNote` - For deleting credit note entities
- `PaymentVoucher` - For deleting payment voucher entities
- `JournalEntry` - For deleting journal entry entities
- `InventoryTransfer` - For deleting inventory transfer entities

### Parameter 2: Finder SQL
- **Type:** Text (Required)
- **Format:** SQL query returning ID column of target entities
- **Purpose:** Locates the specific entity to delete
- **Parameter Substitution:** Supports `{fieldName}` placeholders

**Examples:**
```sql
-- Delete credit note generated from invoice
SELECT id FROM CreditNote WHERE ref5Id = {id}

-- Delete payment voucher linked to sales invoice
SELECT id FROM PaymentVoucher WHERE ref1Id = {id}

-- Delete journal entry generated from document
SELECT id FROM JournalEntry WHERE fromDoc_id = {id} AND fromDoc_type = '{entityType}'

-- Delete related entity by code reference
SELECT id FROM InventoryTransfer WHERE remarks = {code}
```

**SQL Guidelines:**
- Query must return at least one column containing entity IDs
- Use `{fieldName}` syntax for parameter substitution
- Only the first matching entity will be deleted
- Ensure query is specific enough to avoid unintended deletions

## Database Tables Affected

### Target Entity Tables
- **Specified Entity Type:** The entity type specified in Parameter 1
  - Complete entity record deleted including all collections
  - Related cascade deletions handled automatically
  - Audit trail maintained for deletion event

### System Tables
- **Audit Logs:** Deletion events recorded in system audit tables
- **Entity References:** References to deleted entity cleaned up
- **Cascade Effects:** Related entities may be affected based on business rules

## Business Use Cases

### 1. Document Generation Cleanup
- **Auto-Generated Documents:** Remove documents that were automatically created
- **Workflow Reversal:** Clean up when business processes are reversed
- **Template Cleanup:** Remove documents generated from templates

### 2. Data Correction Scenarios
- **Error Recovery:** Delete incorrectly generated entities
- **Process Restart:** Clean up before regenerating corrected entities
- **Duplicate Resolution:** Remove duplicate entities created by error

### 3. Business Logic Changes
- **Rule Updates:** Remove entities when business rules change
- **Process Modifications:** Clean up when workflows are modified
- **System Maintenance:** Remove obsolete or test entities

## SQL Query Examples for Common Scenarios

```sql
-- Delete auto-generated credit notes
SELECT id FROM CreditNote 
WHERE ref5Id = {id}

-- Delete journal entries for accounting reversal
SELECT id FROM JournalEntry 
WHERE fromDoc_id = {id} 
    AND fromDoc_type = '{entityType}'
    AND description1 LIKE '%AUTO%'

-- Delete related payment vouchers
SELECT id FROM PaymentVoucher 
WHERE ref1Id = {id} 
    AND creationDate >= DATEADD(minute, -5, GETDATE())
```

## Important Warnings

### ⚠️ Data Loss Risk
- **Permanent Deletion:** Deleted entities cannot be easily recovered
- **Cascade Effects:** Deletion may trigger removal of related entities
- **Business Impact:** Ensure deletion is appropriate for business context
- **Backup Recommended:** Consider backup before running bulk deletions

### ⚠️ SQL Query Safety
- **Query Validation:** Test SQL queries thoroughly before execution
- **Parameter Injection:** Ensure proper parameter substitution to avoid errors
- **Scope Control:** Use specific WHERE clauses to avoid unintended deletions
- **Single Entity:** Only first matching entity is deleted

### ⚠️ Business Logic Compliance
- **Validation Rules:** Deletion will fail if business rules prevent it
- **Permission Checks:** User must have delete permissions for target entity type
- **Referential Integrity:** Cannot delete entities with dependent records
- **Workflow States:** Some entities cannot be deleted in certain states

### ⚠️ Transaction Considerations
- **Atomic Operations:** Deletion occurs within transaction boundaries
- **Rollback Potential:** Failed deletions may rollback entire transaction
- **Timing Sensitivity:** Consider timing when used with other entity actions
- **Concurrent Access:** Be aware of potential conflicts with concurrent operations

## Field Information Access

For detailed field information:
- **System UI:** Use ALT+CTRL+I on any entity field for "Show Field Info"
- **Documentation:** Visit https://dm.namasoft.com for comprehensive entity documentation

**Module:** core

**Full Class Name:** `com.namasoft.infor.domainbase.util.actions.DeleteRelatedEntityAction`

**Related Actions:**
- [EAGenerateEntityFromEntityAction](EAGenerateEntityFromEntityAction.md)
- [EAGenerateEntityFromEntityActionWithApproval](EAGenerateEntityFromEntityActionWithApproval.md)


</div>

