<rtl>

# توثيق كامل لإنشاء تقارير الكروس تاب، كشف الحساب، وحركة المخزون باستخدام أداة إنشاء التقارير
[لمشاهدة الفيديو](https://youtu.be/jZGCZt99ouw)

السلام عليكم ورحمة الله وبركاته، نبدأ اليوم باستعراض شامل ومفصل لشرح كيفية إنشاء تقارير **كروس تاب (Cross Tab)** وكذلك **كشف حساب** و**كشف حركة مخزنية** باستخدام أداة إنشاء التقارير. هذا الشرح مطابق تماماً لما ورد في الفيديو مع تضمين كل التفاصيل، الأمثلة، الخطوات، والتعليمات بدون تلخيص أو حذف.

لمشاهدة الفيديو الأصلي يمكنكم الانتقال مباشرة إلى:  
[ابدأ من 00:00:01](https://youtu.be/jZGCZt99ouw?t=1)

---

# 1. ما هو تقرير كروس تاب (Cross Tab)؟ وكيفية إنشائه؟  
_00:00:01 – 00:09:42_

- الكروس تاب هو تقرير يعرض البيانات بفرد الأعمدة بدلاً من السطور، وهو اختلاف جوهري عن التقارير العادية.
- الأعمدة تكون مكررة حسب المتغير الذي تريد تركيز التقرير عليه (مثل المخازن)، والصفوف تمثل الأصناف.
- الجدول المستخدم في المثال هو جدول "Item Dimension Key" يحتوي على بيانات الأصناف والمخازن والكميات.
- الخطوة الأولى هي اختيار الألوان المناسبة لتصميم التقرير، مع خيارات شبيهة بألوان Jasper مثل (Hard, Light, Blue).
- في الإعدادات نختار نوع التقرير "كروس تاب فقط" بدون جدول عادي.
- الأعمدة في الكروس تاب تمثل المخازن بينما الصفوف تمثل الأصناف.
- يتم إضافة فلتر لإظهار الكميات فقط الأكبر من أو تساوي 0.
- نوع المعادلة على الأعمدة يكون عادة مجموع (Sum).

### مثال عملي  
- اختيار أول 25 صنفاً من إجمالي 164 صنف موجودين.
- عرض الأعمدة (المخازن) والصفوف (الأصناف) والكميات الحالية.
- ملاحظة: الروابط على المخازن غير مدعومة حالياً في الكروس تاب.

[شاهد الجزء من 00:00:01](https://youtu.be/jZGCZt99ouw?t=1)  
[شاهد الجزء من 00:07:19](https://youtu.be/jZGCZt99ouw?t=439)

---

# 2. تطوير تقرير الكروس تاب والربط مع التصنيفات  
_00:07:19 – 00:11:37_

- إضافة تصنيفات مختلفة في الصفوف مثل (تصنيف 1) قبل الأصناف.
- اختيار التصنيفات بشكل صحيح بحيث تظهر بالترتيب المنطقي (التصنيف قبل الصنف).
- تحري الدقة في اختيار حقول التصنيف وربطها بشكل صحيح بجدول الأصناف.
- تمكين رابط للمعلبات والمخبوزات ضمن التصنيفات مع إظهار الإجماليات.
- تقديم مثال يعرض أكثر من حقل رقمي (كمية حالية، كمية منصرفة).
- التأكيد على إمكانية التعامل مع مجموعات تقارير وتقسيمات معقدة بسهولة.
- نصيحة للمهتمين بدعم النظام بأن يجربوا عمل تقارير كروس تاب.

[شاهد الجزء من 00:07:19](https://youtu.be/jZGCZt99ouw?t=439)  
[شاهد الجزء من 00:11:37](https://youtu.be/jZGCZt99ouw?t=697)

---

# 3. التحكم في الصلاحيات والأمان (Security Constraints) داخل التقرير  
_00:11:37 – 00:16:42_

- شرح آلية تطبيق صلاحيات المستخدم على البيانات التي يعرضها التقرير.
- تحديد صلاحيات المطالعة أو التعديل بناء على الشركة أو الفرع أو القطاع.
- نظام الشركات المركبة: إذا كان المستخدم داخل شركة مركبة، تظهر له بيانات الشركات التابعة لذلك المجمّع فقط.
- أخفاء الأصناف الحساسة التي لا يملك المستخدم صلاحية مشاهدتها.
- شروحات عملية لكيفية تطبيق الفلاتر الأمنية باستخدام أعمدة محددة داخل الجريد (Grid).
- التأكيد أن النظام يقوم تلقائياً بمعالجة هذه الصلاحيات لتقييد البيانات حسب صلاحيات الدخول.

[شاهد الجزء من 00:11:37](https://youtu.be/jZGCZt99ouw?t=697)  
[شاهد الجزء من 00:16:42](https://youtu.be/jZGCZt99ouw?t=1002)

---

# 4. الفرق بين تقرير الكروس تاب والتقرير العادي (Group Report)  
_00:18:07 – 00:21:40_

- التقرير العادي يستخدم التجميع (Grouping) في الصفوف لكن لا يفرد الأعمدة.
- يتم شرح الفرق الجوهري بين الكروس تاب الذي يفرد الأعمدة وبين التقرير العادي الذي يحتوي تجميع صفوف متعددة المستويات.
- إمكانية وضع مستويات متعددة (Levels) في الصفوف كتسلسل هرمي (مثلاً صنف ثم تصنيف).
- كيف يختلف عرض التوتال (الإجمالي) في كل نوع من التقرير.
- توضيح أن الكروس تاب مفيد جداً عند الرغبة في مقارنة البيانات حسب المخازن بشكل أفقي.
- التنويه إلى حلول مشاكل غير ظهور بعض الميزات في نسخ قديمة من البرنامج والحاجة إلى تحديثها.

[شاهد الجزء من 00:18:07](https://youtu.be/jZGCZt99ouw?t=1087)  
[شاهد الجزء من 00:21:40](https://youtu.be/jZGCZt99ouw?t=1300)

---

# 5. إنشاء تقرير كشف حساب وحركة مخزنية مفصل  
_00:26:09 – 00:54:30_

- بداية شرح كشف الحساب الذي يحتوي على:
  - الرصيد الافتتاحي.
  - الحركات المالية (مدين ودائن) حسب الحساب والذمة.
  - الرصيد الختامي.

- تحديد الجداول الأساسية المستخدمة:
  - جداول `ledger_trans_line` للحركات.
  - جداول `item_dimension_key` للكميات والمخازن.
  - جداول الكلفة المتوسطة والتكاليف عبر جدول `item_dimension_cost`.

- بحث مفصل في كيفية جلب الحركات تحت شروط زمنية (فلاتر تواريخ).
- معالجة حالات:
  - حساب له رصيد افتتاحي فقط.
  - حساب له حركات فقط.
  - حساب له رصيد وحركات معاً.
  - حساب لا يوجد به بيانات.
- استخدام دوال حسابية ومعادلات مبنية في أداة إنشاء التقرير للحساب بدقة مثل:
  
  ```sql
  الرصيد = الرصيد الافتتاحي + مجموع الحركات (مدين - دائن)
  ```

- شرح كيفية التعامل مع القيم `NULL` ضمن SQL وتجنب تأثيرها على الحساب.
- ضبط ترتيب البيانات حسب التاريخ ووسيلة فرز معتمدة على `value_date` و`creation_date`.
- عرض كيفية تكوين مجموعات (Groups) وحساب الإجماليات بشكل ديناميكي على مستوى الحسابات والذمم.
- شرح تفصيلي للحقول المستخدمة والأساليب اليدوية لتصحيح الأخطاء وإعادة ترتيب المجموعات.

[شاهد الجزء من 00:26:09](https://youtu.be/jZGCZt99ouw?t=1569)  
[شاهد الجزء من 00:54:30](https://youtu.be/jZGCZt99ouw?t=3270)

---

# 6. تصميم نموذج الطباعة (Print Template)
_00:57:24 – 01:11:35_

- شرح مبسط لبناء نموذج طباعة ضمن أداة التقارير:
    - تعريف مصدر البيانات (مثلاً فاتورة مبيعات).
    - تجزئة النموذج إلى هيدر (Header) وتفاصيل (Details).
- اختيار الحقول المراد عرضها مثل:  
  الكمية، الوحدة، السعر، إجمالي السعر، بيانات العميل، العنوان.
- تحذير من استخدام جداول متعددة قد يؤدي لتكرار غير مرغوب (مثلاً طرق الدفع مع عدة أصناف).
- رسم الجداول والحقول بطريقة منطقية وبسيطة.
- عمل Subreports (تقارير فرعية) لعرض تفاصيل سندات الصرف داخل التقرير.
- تحقيق مرونة في ترتيب الحقول وإمكانية تعديل أماكن الحقول بسهولة عبر محرر خط الشاشة (Screen Modifier).
- توضيح الآليات الخاصة بتعيين الأنواع لكل حقل (مثل حقل كمي، سعر، أو نصي).
- إمكانية عرض أرقام تسلسلية (Line Number) لكل صنف.
- التعامل مع خصائص الحقول مثل نوع السطر (Type) وعدد الأسطر.
- خلاصة أن نموذج الطباعة أبسط من تقرير الكروس تاب ولكن أكثر ملائمة للطباعات الرسمية.

[شاهد الجزء من 00:57:24](https://youtu.be/jZGCZt99ouw?t=3444)  
[شاهد الجزء من 01:11:35](https://youtu.be/jZGCZt99ouw?t=4295)

---

# 7. الأسئلة المتكررة والنقاش الختامي
_01:14:57 – نهاية الفيديو_

- إمكانية تعديل تقارير أداة Jasper القديمة وتحويلها إلى التقارير الجديدة والعكس، وشرح تعقيدات هذه العملية، وأنها ليست متاحة عملياً حالياً.
- نقاش ساخر حول ضرورة انتظار المستقبل (45 سنة طبقاً لما قيل) للحصول على هذه المزايا.
- بعض المشاكل الفنية أثناء الشرح مثل فقدان الشاشة وإعادة الضبط.
- شكر وتقدير للحاضرين وتنويه بجلسات قادمة لمتابعة استفسارات إضافية.

[شاهد الجزء من 01:14:57](https://youtu.be/jZGCZt99ouw?t=4497)

---

# ملاحظات عامة

- جميع خطوات التصميم تمت باستخدام أداة إنشاء التقارير دون الحاجة لكتابة أكواد برمجية مباشرة، مع استخدام معاملات SQL بسيطة ضمن الأدوات.
- تم الحرص على عرض كل البيانات الرقمية بشكل دقيق مع التحكم الكامل في الفلاتر وإدارة الصلاحيات.
- الممارسات المتبعة تمكن من بناء تقارير معقدة تشمل العروض التفصيلية، الحركات المالية، وإمكانيات الطباعة.
- الفيديو غني جداً بمعلومات تقنية وخطوات عملية يمكن تطبيقها مباشرة.

---

# روابط الأقسام الزمنية للفيديو الأصلي لمراجعة التفاصيل

| القسم                          | البداية       | رابط الفيديو               |
|-------------------------------|---------------|----------------------------|
| المقدمة                       | 00:00:01      | [شاهد](https://youtu.be/jZGCZt99ouw?t=1)       |
| شرح كروس تاب                  | 00:00:01      | [شاهد](https://youtu.be/jZGCZt99ouw?t=1)       |
| تطوير الكروس تاب             | 00:07:19      | [شاهد](https://youtu.be/jZGCZt99ouw?t=439)     |
| الصلاحيات والأمان             | 00:11:37      | [شاهد](https://youtu.be/jZGCZt99ouw?t=697)     |
| الفرق بين الكروس تاب والعادي  | 00:18:07      | [شاهد](https://youtu.be/jZGCZt99ouw?t=1087)    |
| كشف الحساب وحركة المخزون     | 00:26:09      | [شاهد](https://youtu.be/jZGCZt99ouw?t=1569)    |
| نموذج الطباعة                | 00:57:24      | [شاهد](https://youtu.be/jZGCZt99ouw?t=3444)    |
| الأسئلة والنقاش الختامي       | 01:14:57      | [شاهد](https://youtu.be/jZGCZt99ouw?t=4497)    |

---

</rtl>