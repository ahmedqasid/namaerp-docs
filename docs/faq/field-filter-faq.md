<rtl>

# ุฃุณุฆูุฉ ุดุงุฆุนุฉ ุญูู ููุชุฑุฉ ุงูุญููู

## ููู ูููู ููุชุฑุฉ ูุฑุฌุน 1 ูู ุฌุฑุฏ ุงูุจููุฏ ููุนุฑุถ ููุณ ุงูุฃุตูุงู ุงูููุฌูุฏุฉ ูู ุงูุชูุงุตููุ

- ุงูุณุคุงู:

ุฃูุง ุฃุณุชุฎุฏู ูุฑุฌุน 1 ูู ุฌุฑุฏ ุงูุจููุฏ ูุฌูุจ ุงูุฃุตูุงูุ ูุฃุฑูุฏ ุฃู ูุธูุฑ ููุท ููุณ ุงูุฃุตูุงู ุงูุชู ุชู ุงุฎุชูุงุฑูุง ูู ุงูุชูุงุตูู. ุงูููุฏ ุงูุฐู ูุชุจุชู ูู:

```tempo
{loop(details)}
termsLines.ref1,Equal,{details.item.item.code},OR;
{endloop}
```

- ุงูุฅุฌุงุจุฉ:

ุงููุงุถุญ ุฃูู ุชุฑูุฏ ููุชุฑุฉ ุญูู `termsLines.ref1` ุจุญูุซ ูุนุฑุถ ููุท ุงูุฃุตูุงู ุงูุชู ุชู ุงุฎุชูุงุฑูุง ูู `details.item.item`.

ููู ููุฌุฏ ุฎุทุฃ ูู ุงูููุฏ ุงููุณุชุฎุฏู:

* ุนูุฏ ูุชุงุจุฉ ุดุฑุท ุงูููุชุฑุฉุ ูุฌุจ ุฃู ุชูุชุจ **ุงุณู ุงูุญูู ุฏุงุฎู ุดุงุดุฉ ุงูุตูู** (ููู ุงูุดุงุดุฉ ุงูุชู ูุชู ุงูููุชุฑุฉ ูููุง)ุ ูููุณ ุงุณู ุงูุญูู ุฏุงุฎู ุงููุณุชูุฏ ุงูุฐู ุชุณุชุนููู.
* ุงุณุชุฎุฏุงู `termsLines.ref1` ุฏุงุฎู ุงูุดุฑุท ุบูุฑ ุตุญูุญุ ูุฃู ูุฐุง ุงูุญูู ููุณุชุฎุฏู ููุท ูุชุญุฏูุฏ ุฃูู ุณูุชู ุชุทุจูู ุงูููุชุฑุ ูููุณ ุฏุงุฎู ุดุฑุท ุงูููุชุฑุฉ ููุณู.

- ุงูุชุตุญูุญ:

ุงุณุชุฎุฏู ุงูุญููู ููุง ูู ููุฌูุฏุฉ ูู **ุดุงุดุฉ ุงูุตูู**ุ ูุงูุชุงูู:

ุฅุฐุง ุฃุฑุฏุช ุงูููุชุฑุฉ ุญุณุจ ุงูููุฏ:

```tempo
{loop(details)}
code,Equal,{details.item.item.code},OR;
{endloop}
```

ูุฅุฐุง ุฃุฑุฏุช ุงูููุชุฑุฉ ุจุดูู ุฃุฏู ุจุงุณุชุฎุฏุงู ุฑูู ุงููุนุฑู:

```tempo
{loop(details)}
id,Equal,{details.item.item.id},OR;
{endloop}
```

::: tip
ุชุฃูุฏ ูู ุฃูู ุชุณุชุฎุฏู ุงุณู ุงูุญูู ุงูุตุญูุญ ุงูููุฌูุฏ ูู ุดุงุดุฉ ุงูููุงู ุงูุฐู ูุชู ุงูููุชุฑุฉ ุนูููุ ูููุณ ุงุณู ุงูุญูู ูู ุงููุณุชูุฏ ุงููุตุฏุฑ.
:::

## ูุง ูู ุฃูุถู ุทุฑููุฉ ุนูุฏ ุงูุจุญุซ ูู ุณูุฏ ุงูุชูุฑูุฏ ุฃู ุงูุตุฑู ูุฅุธูุงุฑ ุงูุฃุตูุงู ุจูุงุกู ุนูู ุชููุฑ ุงูุฑุตูุฏุ

* **ูู ุณูุฏ ุงูุตุฑู ุงููุฎุฒูู**: ุนุฑุถ ุงูุฃุตูุงู ุงูุชู ููุฌุฏ ูููุง ุฑุตูุฏ ููุท.
* **ูู ุณูุฏ ุงูุชูุฑูุฏ ุงููุฎุฒูู**: ุนุฑุถ ุงูุฃุตูุงู ุงูุชู ูุง ููุฌุฏ ูููุง ุฑุตูุฏ ููุท.

---

### ุฃููุงู: ููุชุฑุฉ ุงูุฃุตูุงู ุฐุงุช ุงูุฑุตูุฏ ููุท ูู ุณูุฏ ุงูุตุฑู ุงููุฎุฒูู

ูุญุชูู ุงูููุงู `InvItem` ุนูู ุณุทูุฑ ุจุงุณู `quantities` ูุฑุชุจุทุฉ ุจุฌุฏูู `ItemDimensionsQty`. ููููู ุงุณุชุฎุฏุงู ูุฐู ุงูุนูุงูุฉ ูููุชุฑุฉ ุงูุฃุตูุงู ุงูุชู ููุง ุฑุตูุฏ ููุง ููู:

::: details JSON for direct import

```json
{
  "forType": "StockIssue",
  "automaticUsage": true,
  "lines": [
    {
      "fieldId": "details.item.item",
      "dynamicFilter": "quantities.data.net,GreaterThan,0,AND;"
    }
  ]
}
```

:::

---

### ุซุงููุงู: ููุชุฑุฉ ุงูุฃุตูุงู ุงูุชู ูุง ููุฌุฏ ูููุง ุฑุตูุฏ ูู ุณูุฏ ุงูุชูุฑูุฏ ุงููุฎุฒูู

ูุธุฑุงู ูุฃู ุงูุตูู ูุฏ ูุง ูุญุชูู ุฏุงุฆูุงู ุนูู ุจูุงูุงุช ูุจุงุดุฑุฉ ูู `quantities` ุฅุฐุง ูู ููุฌุฏ ุฑุตูุฏุ ููู ุงูุฃูุถู ุชุญุฏูุซ ุญูู ูุฎุตุต (ูุซูุงู `n5`) ูู ููุงู `InvItem` ูุนูุณ ุงููููุฉ ุงููููุฉ ุงููุชุงุญุฉุ ุซู ุงุณุชุฎุฏุงูู ูู ุงูููุชุฑุฉ.

#### 1. ุฅูุดุงุก ูููุฉ ูุฌุฏููุฉ ูุชุญุฏูุซ ุงูุญูู `n5` ุจูููุฉ ุงูุฑุตูุฏ ุงููุชุงุญ:

::: details JSON for direct import

```json
{
  "scheduleType": "Action",
  "className": "com.namasoft.infor.domainbase.util.actions.EAExecuteUpdateQuery",
  "title1": "Update Query",
  "parameter1": "update i set n5 = coalesce(qty.net,0) from InvItem i\nouter apply (\nselect sum(q.net) net from ItemDimensionsQty q where q.item_id = i.id\n) qty",
  "title2": "Evict Cache After Execution(true,false)",
  "parameter2": "true",
  "actionDescription": "Execute update query specified in first parameter"
}
```
:::

#### 2. ุจุนุฏ ุฐููุ ููุชุฑุฉ ุญูู ุงูุตูู ูู ุณูุฏ ุงูุชูุฑูุฏ ุจูุงุกู ุนูู ุงููููุฉ ุงูุฌุฏูุฏุฉ ูู ุงูุญูู `n5`:

::: details JSON for direct import

```json
{
  "forType": "StockReceipt",
  "automaticUsage": true,
  "lines": [
    {
      "fieldId": "details.item.item",
      "dynamicFilter": "quantities.data.net,LessThanOrEqual,0,AND;"
    }
  ]
}
```
:::

::: tip ููุงุญุธุฉ
- ููููู ุฃูุถูุง ุงุณุชุจุฏุงู `quantities.data.net` ุจู `n5` ูุจุงุดุฑุฉ ุฅุฐุง ุฃุฑุฏุช ุฑุจุท ุงูููุชุฑุฉ ุจุงูุญูู ุงููุญุณูุจุ ูููู ุงุณุชุฎุฏุงู `quantities.data.net` ูุธู ุฃูุซุฑ ุฏูุฉ ุญูุซ ุฃู n5 ูุนุชูุฏ ุนูู ุชุดุบูู ุงููููุฉ.
- ุงุฎุชุฑ ุฌุฏูู ุชุดุบูู ุงููููุฉ ุงููุฌุฏููุฉ ุจุนูุงูุฉ ุจุญูุซ ุชุญุงูุธ ุนูู ุฏูุฉ ุงูุญูู n5 ููู ููุณ ุงูููุช ูุง ุชุดูู ุถุบุทุนุง ุนูู ููุงุฑุฏ ุงูุฎุงุฏู ููุงุนุฏุฉ ุงูุจูุงูุงุช
:::

### ๐ก ุชุญุณูู ุชูููุฐ ุงูุชุญุฏูุซ ุงูุชููุงุฆู ููุญูู `n5` ุจุงุณุชุฎุฏุงู ูุณุงุฑ ููุงู

ุจุฏูุงู ูู ุงูุงุนุชูุงุฏ ููุท ุนูู ูููุฉ ูุฌุฏููุฉ ูุณุชููุฉุ ููููู ุงุณุชุฎุฏุงู **ูุณุงุฑ ููุงู (Entity Flow)** ูุชุญุฏูุซ ุงูุญูู `n5` ูุจุงุดุฑุฉ ุจุนุฏ ุฃู ุญุฑูุฉ ูุฎุฒููุฉ (ุตุฑูุ ุชูุฑูุฏุ ุชุญููู)ุ ูุฐูู ูุชุญููู ุชุญุฏูุซ ููุฑู ููุนุงู ูุน ุชูููู ุงูุถุบุท ุนูู ุงููุธุงู.

---

- ุงูุฎุทูุงุช ุงูููุชุฑุญุฉ:

1. **ุฅูุดุงุก ูุณุงุฑ ููุงู ุฌุฏูุฏ**

* ูุชู ุชุดุบููู ุจุนุฏ ุงูุชุฃุซูุฑ ุงููุนูู ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (ุจุนุฏ ุงูุญูุธ ุงูููุงุฆู).

2. **ุชุญุฏูุฏ ุงูุฌุฏุงูู ุงููุณุชูุฏูุฉ ูู ูุงุฆูุฉ ุฃููุงุน**: 

* `StockIssue` (ุตุฑู ูุฎุฒูู)
* `StockReceipt` (ุชูุฑูุฏ ูุฎุฒูู)
* `StockTransfer` (ุชุญููู ูุฎุฒูู)

3. **ุฅุถุงูุฉ ุฅุฌุฑุงุก ูู ุงูููุน "ุชุดุบูู ุฃูุฑ ุชุญุฏูุซ SQL"** ุจููุณ ููุฏ ุงููููุฉ ุงููุฌุฏููุฉ:

4. **ุชูุนูู ุงูุฎูุงุฑุงุช ุงูุชุงููุฉ ูู ูุณุงุฑ ุงูููุงู**:

* โ `ูุนูู ุจุนุฏ ุญูุธ ุงููุณุชูุฏ ููุงุฆูุง ู ุงูุชุฃุซูุฑ ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช`
* โ `ุงูุชุธุงุฑ ุงูุชูุงุก ูุนุงูุฌุฉ ุงููููุงุช`

ููุฐู ุงูุฅุนุฏุงุฏุงุช ุชุถูู ุฃู ุงูุชุญุฏูุซ ูุชู **ููุท ุจุนุฏ ูุฌุงุญ ุงููุนุงูุฌุฉ ุงููุฎุฒููุฉ**ุ ููุง ูููุน ุญุฏูุซ ุชุนุงุฑุถ ุฃู ุชุญุฏูุซ ุณุงุจู ูุฃูุงูู.

---

- ุงููุงุฆุฏุฉ ูู ูุฐุง ุงูุฃุณููุจ:

* ุชุญุฏูุซ ุขูู ูู `n5` ุฏูู ุงูุญุงุฌุฉ ูุฌุฏููุฉ ุฒูููุฉ.
* ุชูููู ุงูุถุบุท ุนูู ุงููุธุงู ุงููุงุชุฌ ุนู ุชูุฑุงุฑ ุงูุชูููุฐ.
* ุงููุญุงูุธุฉ ุนูู ุฏูุฉ ุงูุฑุตูุฏ ูู ูุงูุฉ ุงูุดุงุดุงุช ุงูุชู ุชุนุชูุฏ ุนูู `n5`.

---
ูุฅููู ุงููุณุงุฑ ุฌุงูุฒ ููุงุณุชูุฑุงุฏ:
::: details JSON for direct import
```json
{
  "entityTypeList": "StockIssueReceiptTransfer",
  "runAfterCommitDocAndEffectOnDB": true,
  "waitForQuantityProcessing": true,
  "details": [
    {
      "className": "com.namasoft.infor.domainbase.util.actions.EAExecuteUpdateQuery",
      "parameter1": "update i set n5 =  coalesce(qty.net,0) from InvItem i\nouter apply (\nselect sum(q.net)  net from ItemDimensionsQty q where q.item_id = i.id\n) qty",
      "parameter2": "true",
      "targetAction": "PostCommit"
    },
    {
      "className": "com.namasoft.infor.domainbase.util.actions.EAExecuteUpdateQuery",
      "parameter1": "update i set n5 =  coalesce(qty.net,0) from InvItem i\nouter apply (\nselect sum(q.net)  net from ItemDimensionsQty q where q.item_id = i.id\n) qty",
      "parameter2": "true",
      "targetAction": "PostDelete"
    }
  ]
}
```
:::
> ๐ฌ ูููููู ุงูุงุญุชูุงุธ ุจุงููููุฉ ุงููุฌุฏููุฉ ูุฎุทุฉ ุงุญุชูุงุทูุฉ ุชุนูู ูุฑุฉ ูููููุง ูุซูุงู ูุถูุงู ุงููุฒุงููุฉ ุงููุงููุฉุ ุฎุงุตุฉู ูู ุญุงูุงุช ุงูุชุนุฏููุงุช ุงููุฏููุฉ ุฃู ุนูููุงุช ุงูุงุณุชูุฑุงุฏ ุงููุจูุฑุฉ.

</rtl>
