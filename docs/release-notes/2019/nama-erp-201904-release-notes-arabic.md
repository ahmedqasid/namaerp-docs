<rtl>

# ملاحظات إصدار نما ERP - أبريل 2019

::: info معلومات الإصدار
**تاريخ الإصدار:** أبريل 2019  
**رقم الإصدار:** 201904
:::

## الإضافات

### نظام المبيعات
- **عرض السعر:** تم إضافة الخيار "تصدير الأصناف إلى Excel" في قائمة "مزيد" بعرض السعر.
- **فاتورة مبيعات:** تم إضافة الخيار "أوقف حجز الكمية" إلى قائمة "مزيد" بمستند فاتورة المبيعات.
- **أمر بيع - فاتورة مبيعات:** عند تحويل أمر بيع إلى فاتورة مبيعات، تم إضافة الخيار "عدم نقل الكميات المستوفاة" لتجنب نقل الكميات التي تم إستيفاؤها سابقاً.
- **فاتورة مبيعات:** تم إضافة الخيار "تحديث أسعار البيع" في قائمة "مزيد" لتحديث أسعار البيع للأصناف في الفاتورة.
- **عرض السعر:** تم إضافة المسار `printOfferAndSendViaEmailsAndSMS` لطباعة وإرسال عرض السعر عبر الإيميل و SMS.
- **أمر بيع:** تم إضافة الخيار "تحديث أسعار البيع" في قائمة "مزيد".
- **بوليصة شحن:** إضافة مسار الكيان `collectShipmentItemsFromSalesOrder` لتجميع أصناف الشحن من أمر البيع.
- **عرض السعر:** تم إضافة المسار `duplicateLastOffer` "نسخ آخر عرض سعر" في القائمة "مزيد".
- **فاتورة مبيعات:** تم إضافة المسار `updateSalesPrices` "تحديث أسعار البيع" في القائمة "مزيد".
- **أمر بيع:** تم إضافة المسار `updateSalesPrices` "تحديث أسعار البيع" في القائمة "مزيد".
- تم إضافة مستند "مبيعات الأصناف والخدمات" (`SalesItemsAndServices`) الذي يظهر تفاصيل المبيعات لكل موظف مبيعات، ويتضمن مجموعة من الخصائص: يعمل مثل مستند استفسار مبيعات موظف، يحسب الأرباح الخاصة بالمبيعات لكل صنف.

### نظام المشتريات
- **فاتورة مشتريات:** تم إضافة المسار `reversePurchasesInvoice` "عكس فاتورة المشتريات" في قائمة "مزيد" لعكس تأثيرات فاتورة المشتريات.
- **فاتورة مشتريات:** إضافة أيقونة بجانب حقل "تم الاستلام" في سطور فاتورة المشتريات لتوضيح وجود حركات مخزنية (أسندة مخزنية) مرتبطة بالسطر.
- **فاتورة مشتريات:** تم إضافة المسار `collectToOnePurchasesInvoice` "تجميع فواتير مشتريات" في قائمة "مزيد" لدمج عدة فواتير في فاتورة واحدة.
- **أمر شراء:** تم إضافة المسار `generatePurchasesInvoicesFromPos` "توليد فواتير مشتريات من أوامر الشراء" في قائمة "مزيد".
- **فاتورة مشتريات:** تم تحسين مسار `collectToOnePurchasesInvoice` بحيث يتم نسخ المعايير والمراجع من الفواتير الأصلية.

### نظام المخزون
- **سند الصرف المخزني:** تم إضافة الخيار "تجميع الأصناف المتشابهة" لتجميع الأصناف ذات النوع والوحدة واللوت المتشابهة في سطر واحد.
- **التحويل المخزني:** تم تحسين التحويل المخزني بحيث يأخذ في الاعتبار حقل "ضمن المخزون الآمن" للصنف، وعدم التحويل إلا للكمية الزائدة عن المخزون الآمن.
- **سند الاستلام المخزني:** تم إضافة الخيار "تحديث أسعار الشراء" في قائمة "مزيد" لتحديث أسعار الشراء للأصناف.
- **طلب صرف:** تم إضافة المسار `collectDispenseRequestItems` "تجميع أصناف طلب الصرف" لدمج طلبات الصرف المتشابهة.
- **سند الاستلام المخزني:** تم إضافة المسار `updatePurchasesPrices` "تحديث أسعار الشراء" في القائمة "مزيد".
- **طلب صرف:** تم إضافة المسار `collectDispenseRequestItems` في القائمة "مزيد".
- تم إضافة الخيار "السماح بالمرور بالسالب لصنف ال توجد به كمية بالمخزن" بإعدادات المخزون.
- تم إضافة الخيار "السماح بصرف بضاعة أمانة" للمخازن.
- في حالة التأشير على خيار "السماح بصرف بضاعة أمانة" على إعدادات المخزن، وعند عمل صرف مخزني، يقوم النظام بتحميل اللوتات في الجريد، ويسمح بالصرف منها حتى وإن كانت كمية الأمانة تساوي الكمية.

### نظام الموارد البشرية
- **تحليل راتب:** تم إضافة تحليل الرواتب يظهر به بنود الراتب ومعادلتها.
- **مستند الموظف:** تم إضافة المسار `updateEmployeeSalaryList` "تحديث سجل الراتب طبقاً لملف الموظف".
- **مستندات العرض الوظيفي، تحديث بيانات الموظف، رغبة الموظف في إنهاء الخدمة، إنهاء خدمة الموظف:** تم إضافة حقل "رقم القرار".
- **إيقاف راتب:** تم تفعيل إيقاف راتب على السجل بدون ما يؤثر على التصفية وإضافة الخيار "إيقاف مستحقات نهاية الخدمة" لمستند إيقاف الراتب وإعداداته في ملف أنواع إيقاف المرتب.
- **أنواع الإيقاف:** تم إضافة الخيار "إيقاف مستحقات نهاية الخدمة".
- تم إضافة مستند "إيصال صرف نقدي لموظف" (`cashPaidToEmployee`).
- **سند ضم مدة سابقة:** تم التحسين بحيث في حالة عدم وجود سند تصفية مستحقات لموظف، يتم أخذ الإعدادات الافتراضية.
- **أمر بيع:** تم إضافة محدد "قانون العمل" في كل من سطور الموظفين وسطور العمالة في أمر البيع.
- **أوفر تايم الموظف وسجل الأوفر تايم:** تم إضافة حقل "الساعة الليلية من" و "الساعة الليلية إلى" بحيث إذا كان وقت الأوفر تايم خلال هذه الفترة يتم اعتباره أوفر تايم ليلي.
- **معادلة الضريبة:** تم إضافة المتغيرات التالية: نسبة الضريبة الشهرية (`percIncomeMonthlyPerc`)، قيمة ضريبة الشهور السابقة من السنة (`prevIncomeVal`)، قيمة مفردات الراتب الخاضعة للضريبة للشهور السابقة من السنة (`prevtaxableVal`).
- **اعتبار أجزاء الساعة - ساعات العمل الليلي:** تم عمل اعتبار أجزاء الساعة في ساعات العمل الليلي.
- **تحديث الأوفر تايم بالتاريخ:** إضافة هذا المستند لحساب الأوفرتايم من تاريخ إلى تاريخ.
- إضافة الخيار "عدم اعتبار التأمينات في تقرير 41" بإعدادات الموارد البشرية.
- إضافة مسار كيان بمستند سجل الرواتب "تحديث سجل الراتب طبقاً لملف الموظف" وذلك في حالة إصدار راتب الموظف ثم تعديل الراتب الأساسي يوضع الراتب الأساسي الجديد للموظف في سجل الراتب.
- عند إصدار سند صرف على موظف ينتج عنه قيد معكوس.

### نظام الأصول الثابتة
- **ملف الأصل:** إضافة مجموعة `custDepsHistory` بها جدول يوضح تواريخ بداية ونهاية الإهلاك وأخرى بها تواريخ البداية والنهاية للضمان.
- **ملف الأصل:** إضافة بالجريد قيمة الإهلاك والضمان الخاص بكل فترة.
- **ملف الأصل:** إضافة حقل الموقع بالجريد.
- **ملف الأصل:** مع كل تعديل على التواريخ أو القيم الخاصة بالإهلاك الموجودة بملف الأصل يحتفظ النظام بها في الجريد.
- عند عمل إهلاك للأصل، تظهر التواريخ كما كانت في أول إهلاك يتم (تاريخ البداية وتاريخ النهاية).

### نظام نقطة البيع
- تم إضافة مخزن نقطة البيع في نقل البيانات.
- لحل مشكلة تفعيل الآلية الأخرى للعمولات يتم إضافة خيار "تفعيل الآلية البديلة للعمولات" في نافذة الإعداد العام بموديول نقطة البيع.
- إضافة الحقل `posinvoicedetails.unitPrice` والحقل `posinvoicedetails.tax`.
- إمكانية فتح الدرج بدون عمل حركة بيع.
- تحسين شاشة نقطة البيع بوضع زر "سؤال قبل الإغلاق" بالإعدادات العامة وإضافة "هل تريد إغلاق الشاشة؟".

### نظام البنوك
- **مستند شيك مصدر:** إضافة مسار كيان "إلغاء الإيداع" بتعليمه يتم إرجاع الشيك من حالة مودع إلى حالة مصدر.

### نظام المشاريع
- **مستند مشروع:** تم إضافة المسار `calculateActualCostsFromLedger` "حساب التكاليف الفعلية للمشروع".
- تم إضافة جدول التكاليف الفعلية للمشروع (`ActualProjectCostFromLedger`).

### نظام مقاولات التركيبات
- **عقد المقاولة:** كان يتم إظهار رسالة "البيانات المطلوبة غير موجودة" عند الإدخال - تم ضبطها.
- **عرض أسعار مقاولة، عقد مقاولة:** إضافة بنود الشروط.
- **عرض أسعار المقاولة والعقد:** إضافة الحقل `priceListId` (قائمة السعر) برأس عرض أسعار مقاولة برأس العقد.
- **الشروط:** إضافة الخيار "يمكن تعديل المرحلة".
- تم إضافة جدول الدفعات بعرض أسعار مقاولة والعقد مقاولة والمستخلص.
- تم إضافة شروط في كل من عرض أسعار مقاولة والمقايسة.

### الإعدادات العامة
- **مساعدة الحقول:** إضافة الخيار "يتم تفعيل المساعدة لـ" الذي يحتوي على ثلاث خيارات:
  - كل المستخدمين
  - المستخدمين المحددين هنا
  - كل المستخدمين ما عدا المحددين هنا
- تم إضافة إعداد عام "وقت إعادة تحميل الشاشة تلقائياً بالدقائق".
- تم إضافة تحسينات للسماح للعميل بأن يرسل SMS عن طريق نما.
- تم تنفيذ كل مثيلات لـ `CriteriaProcessingAdapter` تستعمل المتغير `whereCondition` لتقوم بإضافته إلى `CriteriaTools.getCriteria` إذا كان غير فارغ.
- إضافة حقل "محدد الدول" و "محدد المناطق" ضمن ملف تعريف ملف المنطقة.
- تم إضافة الحقل "وسم مطور نما" إلى جريد المساعدة السريعة.
- إمكانية تعريف أكثر من فئة لكل مستخدم وإمكانية تعريف فئة على مستوى الشركة واعتبارها.
- إضافة نوع ترتيب جديد اسمه "شجرة" للشاشات والتقارير.
- تم تطوير آلية لجدولة دوال المقدمة والمؤخرة بحيث يتم تشغيلها قبل أو بعد تشغيل المهمة المجدولة.
- تم إضافة محدد الشحنة في السطور بمستندات إدارة التوزيع.
- تم عمل اعتبار للحقل `autoGenerateCodeJavaScript` بعملية النسخ.
- تم إضافة اختصار في المحدد (قوائم الاختيار) من نوع (رئيسي وتفصيلي) من خلال الخيار "معرف قائمة المفردات".
- عند عمل (اضغط للتوسيع) إلى حقل الكود (من إعدادات الحقل)، يقوم النظام بعرض رسالة خطأ بعد الإضافة.
- تم إضافة الخيار "السماح بتحديد كل القيم في المحدد" إلى "الإعدادات".
- عند إنشاء تطبيق الموبايل أندرويد بالمسار `mobile apps` تكون مغلفة ومضمنة بالمستودع مباشرة.
- تحسين المحدد بحيث لو كان العميل يقوم بكتابة قيمة على حقل الاختيار ويريد إرفاق أي ملف، النظام كان يؤدي إلى مسح القيمة.
- تم إضافة الخيار "عدد الصفوف المعروضة في قائمة السجلات" في الإعدادات العامة.
- تم إضافة المسار "حساب المبالغ من شاشة تقرير الأرباح والخسائر" لحساب المبالغ في تقرير الأرباح والخسائر.
- تم إضافة الأداة `entityInspector` في المرفقات.

## الأخطاء

### نظام المخزون
- **كارت الصنف:** إصلاح خطأ في مستند كارت الصنف عند الحفظ يظهر رسالة "البيانات المطلوبة غير موجودة".
- **كارت الصنف:** يقوم النظام بتحويل سيريال الأصناف في صفحة السيريالات إلى أعداد صحيحة وبالتالي لا يمكن البحث إلا بالرقم فقط.
- **تحويل مخزني:** عند تشغيل مستند تحويل مخزني بالصنف أو أكواد نقل مخزني (بين مواقع مختلفة) ثم حفظ المستند، قد يقوم النظام بعرض رسالة خطأ.
- في مستند الصرف المخزني، لا يقوم النظام بخصم الكميات بشكل صحيح.

### نظام المبيعات
- **أمر بيع - فاتورة مبيعات:** إذا كان عميل له سياسة ضريبية، ثم تم عمل أمر بيع ببيانات الضرائب الخاصة بالسياسة، ثم تم عمل فاتورة مبيعات من أمر البيع، فالمعلومات الضريبية الموجودة في أمر البيع لا تنتقل إلى الفاتورة.
- خطأ في فلترة قائمة الأسعار: في بعض الأحيان لا يقوم بجلب المحددات الصحيحة.
- **مردود مبيعات:** في بعض الأحيان يظهر في مردود المبيعات الخطأ عند عمل سند صرف مخزني.

### نظام المشتريات
- **فاتورة مشتريات:** في بعض الأحيان، يقوم النظام بإظهار رسالة خطأ عند الحفظ كمسودة.
- **فاتورة مشتريات:** يقوم النظام بعرض رسالة خطأ "لا يوجد مورد مع الكود المحدد" في حالة الحفظ كمسودة.

### نظام الموارد البشرية
- **بيانات الحضور والانصراف:** المحدد "سنة" لا يعمل وإنما يعمل السنة والشهر واليوم فقط.
- **اجتماع:** لا يتم التحقق من المستخدم فقط وإنما أيضاً من الموظف، وعليه إذا لم يكن للمستخدم موظف فلن يدخل في مستند الاجتماعات.
- **بيانات انصراف الموظفين:** تحدث مشكلة في بيانات انصراف الموظفين أنه لا يتم الحساب لبعض الموظفين.
- **رفع ملف الحضور والانصراف:** وجود أيام لموظف وإجازة يوم في منتصف الأسبوع وتم رفع الملف، النظام أوتوماتيكياً يضع غياب ولا يعتبر الإجازة.
- تطبيق الأندرويد الخاص بالإجازات لا يعمل في بعض الأحيان.
- عند عمل إجازة جزئية والضغط على زر موافق قد تظهر رسالة "لا يمكن تنفيذ العملية".

### نظام نقطة البيع
- في إلغاء ترحيل قيم فواتير نقاط البيع إلى نما يقوم النظام بإرسال رسالة خطأ.
- في بعض الأحيان، عند عمل خصم لا يتم حساب قيمة الخصم بشكل صحيح.

### نظام الأصول الثابتة
- **مستند نقل مواقع أصول بالباركود:** عند تحديد الموقع الجديد ومسح الباركود الخاص بالأصل، لا يقوم النظام بملء المعلومات للأصل.
- **مستند إهلاك أصول:** عند فتح شهر جديد ومحاولة عمل إهلاك أصول، يقوم النظام بعرض رسالة "لا يمكن تنفيذ العملية".

### نظام البنوك
- **شيك مصدر:** أحياناً الشيكات المصدرة المودعة والمحصلة لا يظهر لها قيد، في حين أن الشيكات التي في حالة مصدر يظهر لها قيد.

### نظام المحاسبة العامة
- **دفتر القيود اليومية:** إذا كان هناك محدد محفوظ للدفتر مع وضع شرط في محدد "من" أو "إلى"، لا يعمل هذا الشرط بشكل صحيح.

### مستندات الموبايل
- مشكلة في جمع البيانات: أداة جمع البيانات في الموبايل عند دخول موظف ليس له صلاحية على المستند، يظهر له المستند.
- **مستند إصدار لملء البيانات:** ينشئ المستند بدون ملئه ويكون فارغ في بعض الأحيان.
- **مستند الجرد بالموبايل:** عند عمل جرد أول مرة ثم تعديل على الجرد ثانياً، لا يعمل التعديل.

### نظام التصنيع
- **أمر إنتاج:** محدد وضع البدء لا يقوم بالعمل.
- **مستند سند استلام منتج تام:** في بعض الأحيان، لا يتم ملء حقل كمية التالف بالمستند بشكل صحيح.

### الإعدادات العامة
- **جدولة المهام:** عند إضافة قاعدة إلى الجدولة وعدم إضافة سطر بالجريد، يقوم النظام بعرض رسالة خطأ.
- في بعض الأحيان، عند عمل تصدير، لا يقوم النظام بتنزيل الملف.
- تغيير نسبة التكبير في المتصفح يؤدي إلى تغيير حجم أيقونات القائمة.
- عند فتح الشاشة بطيئة، قد يقوم بفتح شاشة سوداء.
- في بعض الأحيان، عند عمل تكبير للشاشة (F11) قد يختفي الـ Ribbon ولا يظهر إلا بتصغير الشاشة.
- **الطباعة بالـ PDF:** في حالة أن التقرير المطلوب طباعته أكثر من 100 صفحة، يكون الـ PDF بطيء جداً.
- **عرض مستخدمي النظام المتصلين:** عند ترتيب السجلات بالتاريخ، لا يقوم النظام بالعرض بشكل صحيح.
- في بعض الأحيان، تحدث أخطاء في معالجة البيانات المالية أو الكميات المخزنية.

</rtl>