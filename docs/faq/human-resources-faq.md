<rtl>

# أسئلة شائعة في موديول الرواتب والموارد البشرية 

## إذا تأخر الموظف عن البصمة الصباحية لظرف طارئ (غير مستقطع من الراتب)، كيف يتم التعامل معه في النظام؟

## الإجابة:

في حال تأخر الموظف عن الموعد المحدد للحضور (مثلاً من المفترض أن يحضر الساعة 8 صباحًا، ولكنه حضر الساعة 10 صباحًا)، وكان لديه **عذر مقبول**، فإن النظام يمكنه استثناء هذا التأخير من الخصم أو الإنذار، بشرط تسجيل إذن رسمي.

### خطوات المعالجة في النظام:

1. **فتح شاشة "إذن انصراف"**:

    * قم بإدخال إذن يغطي الفترة من الساعة **08:00 إلى الساعة 10:00** في نفس يوم التأخير.
    * اختر نوع الإذن المناسب (مثلاً: إذن تأخير بعذر، غير مستقطع من الراتب).

2. **النتيجة**:

    * عند احتساب التأخيرات في كشف الحضور والانصراف، سيقوم النظام **باستثناء الساعتين** من التأخير.
    * بالتالي، **لن يتم احتساب اليوم كتأخير**، ولن يُخصم من الموظف أو يُسجل عليه إنذار.

::: tip ملاحظات إضافية

* يُفضل توثيق سبب الإذن في حقل الملاحظات.
* يمكن إعداد صلاحيات للمدير المباشر أو مسؤول الموارد البشرية للموافقة على الإذن عند الحاجة.
:::

---

## مطلوب معرفة تأخيرات الموظف و حساب إضافي له في أيام العطلات الاسبوعية و العطلات الرسمية؟

### آلية حساب التأخيرات والإضافي:

#### 1. **العطلات الرسمية والإجازات الاسبوعية:**

يتم التحكم في طريقة حساب الإضافي للعطلات من خلال إعدادات **إعدادات الموارد البشرية** (`HRConfiguration`):

* **للعطلات الرسمية**: يُفعّل إعداد **"احتساب وقت العمل بطريقة عادية لأيام العطلات الرسمية (الاضافي لن يكون طوال اليوم)"**
* **للإجازات الاسبوعية**: يُفعّل إعداد **"احتساب وقت العمل بطريقة عادية لأيام الاجازة (الاضافي لن يكون طوال اليوم)"**

عند تفعيل هذه الإعدادات:
- لا يتم اعتبار اليوم كاملاً كوقت إضافي
- يُحسب فقط الوقت الفعلي الذي عمله الموظف زائد عن التوقيت المحدد

#### 2. **حساب التأخيرات:**

يتم حساب التأخيرات بناءً على **ملف الدوام** (`AttendanceShift`) المخصص للموظف:

* **أوقات العمل**: يتم تحديد أوقات الحضور والانصراف لكل يوم من أيام الأسبوع
* **العطلات الاسبوعية**: يتم تحديدها في ملف الدوام (مثلاً: الجمعة راحة إسبوعية)
* **السماح بتحديد مواعيد**: إعداد **"السماح بتحديد مواعيد الحضور و الانصراف للعطلات الاسبوعية"** يحدد إمكانية العمل في أيام العطل

#### 3. **معالجة إذن الانصراف:**

لمعالجة التأخيرات التي لها عذر مقبول، يتم استخدام **إذن إنصراف** (`LeavePermission`):

1. **إنشاء الإذن**: يُسجّل إذن يغطي فترة التأخير
2. **التأثير على الإضافي**: حسب إعداد **"اعتبار الاذون عند حساب الوقت الاضافي"** في إعدادات الموارد البشرية
3. **التأثير على التأخير**: سيتم استثناء فترة الإذن من حساب التأخيرات

#### 4. **إعدادات تحكم إضافية:**

* **حساب الوقت الإضافي من إنتهاء الدوام**: يحدد متى يبدأ حساب الإضافي
* **اعتبار المأموريات عند حساب الوقت الاضافي**: تأثير المأموريات على حساب الإضافي
* **عدد الساعات المسموح بها قبل منع تسجيل الانصراف**: حد أقصى للساعات المسموحة

::: tip ملاحظات تقنية هامة
- **ملف الدوام** (`AttendanceShift`) يحدد أوقات العمل والعطل لكل يوم
- **إعدادات الموارد البشرية** (`HRConfiguration`) تتحكم في سلوك حساب الإضافي والتأخير
- **إذن الانصراف** (`LeavePermission`) يُستخدم لاستثناء فترات التأخير المبررة
- يمكن تخصيص **نوع سبب** (`LeaveReason`) مختلف لكل إذن حسب طبيعة العذر
:::

::: details الحقول التقنية في النظام
**في ملف الدوام (`AttendanceShift`)**:
- `allowSpecifyingTimeInWeekEnd`: السماح بتحديد مواعيد الحضور و الانصراف للعطلات الاسبوعية
- `friday.weeklyRest`: تحديد يوم الجمعة كراحة إسبوعية
- `numberOfHoursAllowedBeforePreventingCheckOut`: عدد الساعات المسموح بها قبل منع تسجيل الانصراف

**في إعدادات الموارد البشرية (`HRConfiguration`)**:
- `calculateNormalWorkHoursForHolidays`: احتساب وقت العمل بطريقة عادية لأيام العطلات الرسمية
- `calculateNormalWorkHoursForVacations`: احتساب وقت العمل بطريقة عادية لأيام الاجازة
- `overTimeAfterWorkTime`: حساب الوقت الإضافي من إنتهاء الدوام
- `leavePermissionAddsOvertime`: اعتبار الاذون عند حساب الوقت الاضافي
:::

---

## كيف يمكن جعل سندات الراتب تُنشئ قيد إجمالي لكل الموظفين مرة واحدة بدلاً من قيد لكل موظف للحفاظ على سرية المعلومات؟

- المشكلة:
بشكل افتراضي، ينشئ النظام **قيد محاسبي منفصل لكل سند راتب موظف**، مما يعني أن أي شخص لديه صلاحية الاطلاع على القيود المحاسبية يمكنه معرفة تفاصيل راتب كل موظف على حدة، وهذا يتعارض مع **سرية معلومات الرواتب**.

- الحل:
يمكن تطبيق نظام **القيد الإجمالي الموحد** من خلال الخطوات التالية:

1. **إعدادات توجيه سند الراتب (SalaryDocument):**
- فعّل الخيار **"بدون تاثير محاسبي" (`withoutAccountingEffect`)** في توجيه سند الراتب
- هذا سيمنع إنشاء قيود محاسبية فردية لكل سند راتب

2. **إعدادات توجيه سجل الرواتب (SalarySheet):**
- فعّل الخيار **"إنشاء تأثير محاسبي" (`generateAccountingEffects`)** في توجيه سجل الرواتب  
- هذا سيؤدي إلى إنشاء قيد محاسبي واحد إجمالي عند حفظ سجل الرواتب

⚠️ **خطوات إضافية مهمة لضمان السرية:**

3. **تعديل التأثير المحاسبي لمفردات الراتب:**
يجب تغيير التأثير المحاسبي في **ملف مفردات الراتب** (`SalaryComponent`) من:
- **قبل:** حساب ذمة موظف (يظهر اسم الموظف في القيد)
- **بعد:** حساب فرعي عام (رقم إجمالي بدون أسماء موظفين)

4. **تغيير مستحقات الموظفين:**
- تغيير حسابات **مستحقات الموظفين** من **حسابات ذمة موظف** إلى **حسابات فرعية عامة**
- استخدام أرقام إجمالية بدلاً من أسماء الموظفين

---

 🎯 **النتيجة النهائية:**

::: tip **مع التطبيق الصحيح للخطوات أعلاه:**
- ✅ **قيد محاسبي واحد إجمالي** بدلاً من قيود فردية لكل موظف
- ✅ **حفظ سرية الرواتب** - لن يظهر راتب أي موظف في القيود المحاسبية
- ✅ **أرقام إجمالية فقط** في الحسابات الفرعية
- ✅ **دقة محاسبية** مع الحفاظ على إجمالي الرواتب والمستحقات
:::

::: warning **تحذير مهم:**
إذا **لم** تقم بتغيير حسابات مستحقات الموظفين من **ذمة موظف** إلى **حساب فرعي عام**، فسيظل بإمكان الأشخاص الذين لديهم صلاحية الاطلاع على القيود المحاسبية **معرفة تفاصيل راتب كل موظف**، وبالتالي لن تتحقق السرية المطلوبة.
:::

---

</rtl>
