# نما إي آر بي - ملاحظات الإصدار ديسمبر 2020

<div dir="rtl">

::: info معلومات الإصدار
**تاريخ الإصدار:** ديسمبر 2020  
**رقم الإصدار:** Nama-ERP-202012  
**نوع الإصدار:** تحسينات وإضافات جديدة
:::

## الإضافات

### نظام المخزون

- تم إضافة الخيار **"عدم نسخ الكود عند التحويل إلى صنف"** إلى إعدادات الـ `Chain Supply`

### نظام المشتريات

- تم إضافة الخيار **"عدم تفريغ حقل الذمة مع اختيار العميل أو المورد"** إلى توجيه سندات المشتريات

### نظام المبيعات

#### إعدادات إدارة التوزيع

تم إضافة الخيارات التالية إلى إعدادات إدارة التوزيع:
- إدراج `N1` في سطور المبيعات من قائمة أسعار عند اختيار كود الصنف
- إدراج `N2` في سطور المبيعات من قائمة أسعار عند اختيار كود الصنف  
- إدراج `N3` في سطور المبيعات من قائمة أسعار عند اختيار كود الصنف

- تم إضافة الخيار **"عدم تفريغ حقل الذمة مع اختيار العميل أو المورد"** إلى توجيه سندات المبيعات

#### دفع بطاقة الائتمان

تم إضافة الملفين **"Payment Terminal"**، **"Payment Gateway Method Group"**، وذلك لإمكانية الدفع عن طريق بطاقة الائتمان والتعرف عليها آلياً بفاتورة المبيعات بدلاً من إدراج طريقة الدفع يدوياً، حيث تم إضافة الآتي إلى فاتورة المبيعات:
- الحقل `"paymentTerminal"` برأس فاتورة المبيعات
- الزر **"ادفع الفاتورة"** للتعرف آلياً على بطاقة الائتمان المدخلة بالجهاز ومن ثم دفع القيمة المتبقية بها أو دفع قيمة السطر المفعل بتفاصيل فاتورة المبيعات

### نظام الحسابات

- تم إضافة الحقلين **"من تاريخ"**، **"إلى تاريخ"** بنافذة `سعر صرف`، ويكون للفترة الموجودة بين التاريخين الأولوية بعد السعر اليومي
- **سندا إشعار الخصم والإضافة**: تم إضافة **خمسة مرفقات**

### نظام المقاولات

- تم إضافة الخيار **"نسخ الإجمالي اليدوي من السابق مع بناء على"** إلى إعدادات المقاولات
- تم إضافة **5 أرقام**، **5 نصوص**، **5 تواريخ**، **5 مراجع** إلى نافذة `اعتماد العميل للصنف`
- تم إضافة إمكانية **تجميع سطور إصدار القوائم المالية** حسب المحددات و (`ref1`, `ref2`, `ref3`) والسجل والذمة من سطور القيود النظامية
- تم إضافة مستند **"طلب صرف خامات مقاولات"**

#### مستخلص مشروع

تم إضافة `مسار كيان` يقوم بإضافة الكميات التي تم بها تحويل مخزني الخاص بكود الموازنة التقديرية الخاصة بالبند الحالي إلى الكمية الحالية، وذلك بمجرد إدراج كود البند

### نظام الاعتمادات المستندية

- تم السماح بعمل `سند تكليف` بعد عمل `جرد مخزني`

### نظام خدمة العملاء

تم إضافة **عشرة حقول** (`Boolean`) إلى كل من المستندات التالية:
- `بلاغ صيانة`
- `أمر صيانة`
- `معاينة قبل التركيب`

مع مراعاة نسخها عند استخدام **"بناء على"**

### نظام البنوك

#### سندات خطاب الضمان

- تم إضافة حقلين (`نسبة - قيمة`) بعد التغطية باسم **التسهيلات** وهو النسبة المكملة دائماً لنسبة التغطية حيث التأثير في أي نسبة منهم يقوم بالتأثير في الأخرى بسندات خطاب الضمان
- تم إضافة الحقول **"مدين التسهيلات"**، **"دائن التسهيلات"**، **"مدين القيمة"**، **"دائن القيمة"** لتوجيه مستند `إصدار خطاب ضمان`

### نظام إدارة الموارد البشرية

#### مؤشر الأداء

تم إضافة الخيارات التالية بنافذة **مؤشر الأداء**:
- لا يتم احتسابه في أيام العطلات الأسبوعية
- لا يتم احتسابه في أيام الإجازات  
- لا يتم احتسابه في أيام العطلات الرسمية
- لا يتم احتسابه في أيام العمل

- تم إضافة الخيار **"اعتبار الحضور يبدأ مع بداية الدوام الثاني عند وجود سطر حضور وانصراف يشمل أكثر من دوام"** إلى إعدادات الموارد البشرية

#### تحسينات أخرى

- في نافذة `موافقة على مؤشر الأداء النظامي`، تم التحسين بحيث يسمح المستند بالحفظ في حالة أن حقل **أقصى عدد ساعات لليوم الواحد** الموجود في رأس المستند يكون فارغاً اعتماداً على حقل أقصى عدد ساعات لليوم الواحد الموجود في السطور فقط

#### ملف الموظف

- تم زيادة عدد حقول الـ `description` لتكون **20** بدلاً من **15**. كذلك تم زيادة عدد حقول الـ `N` بحيث تكون **10** بدلاً من **5**

#### ملف متقدم للعمل

- تم إضافة عدد **5 مرفقات**

### نظام التصنيع

#### سند موارد

تم إضافة القسمين **"الموارد اليدوية لعملية في المدى"**، **"الموارد اليدوية لعمليات محددة"** حتى يتم إدراج جميع هذه العمليات المذكورة بتفاصيل المستند

#### أمر الإنتاج

- **أمر الإنتاج**: تم تعديل العنوان الخاص بالإجراء **"إلغاء بدء أمر إنتاج"** بأمر الإنتاج
- **أمر الإنتاج المجمع**: تم تعديل العنوان الخاص بالإجراء **"إلغاء بدء أمر إنتاج مجمع"**

#### توجيه سند تنفيذ أمر إنتاج

تم إضافة الخيارين التاليين لتوجيه `سند تنفيذ أمر إنتاج`:
- **"لا يمكن تنفيذ عملية تشغيل في أمر إنتاج بدون سند فحص جودة تمت الموافقة عليه"**
- **"لا يمكن تنفيذ عملية تشغيل في أمر إنتاج بدون سند تأكيد جودة تمت الموافقة عليه"**

- تم إضافة الخيار **"عدم إصدار سند فحص جودة في حالة عدم وجود قائمة فحص جودة في سطور التشغيل في أمر إنتاج"**

#### تحسينات سند الموارد

- **سند الموارد**: تم التحسين بحيث عند كتابة رقم العملية (`operation1`, `operation2`, `operation3`, `operation4`, `operation5`) بعد إضافة كافة سطور الموارد من `بناء على`، يقوم بفلترة موارد العملية المكتوبة

#### نافذة نشاط

تم إضافة **عشرة حقول** إضافية لكل نوع من أنواع الحقول (`date`, `n`, `description`, `ref`)

- تم إضافة **5 حقول** للتاريخ على مستوى السطر بالنسبة لشاشة `تنفيذ الإنتاج`

### نظام الجيوي الجديد

- تم تحسين نظام الموافقات بحيث لا يكون القرار **"موافقة"** هو التلقائي

### نظام الأصول الثابتة

#### مستند التخلص من الأصول

- تم تغيير عنوان الجريد الخاصة بالتخلص من أصل ثابت بحيث يكون **"الأصول الناتجة عند التخلص"**
- تم جعل إظهار الجريد الخاص بمستند `تخلص من أصل ثابت` كأحد المميزات التي قد تكون غير مستعملة وذلك من خلال قائمة الإعدادات. تم إدراج هذه الميزة بالاسم **"إنشاء أصول في سندات التخلص"**

#### نافذة افتتاح أصل ثابت

- بنافذة `افتتاح أصل ثابت`، تم إظهار عمود **العمر المتبقي**

### نظام نقاط البيع

#### تحسينات الفواتير والدفع

- تم التحسين بحيث تكون قيمة الفاتورة الإجمالية ضمن `جدول تفاصيل الدفع`
- تم إضافة الخيارين **"لا تستخدم في مصروفات نقاط البيع"** و**"لا تستخدم في مقبوضات نقاط البيع"** لملف `طريقة الدفع` بنما
- تم إضافة الخيار **"إخفاء الذمم الافتراضية في سندات الصرف والقبض"** في إعدادات نقاط البيع
- تم إضافة الخيار **"عدم إخفاء الحقول في حالة عدم وجود صلاحية بها للمستخدم"** لإعدادات نقاط البيع. يستخدم في حال رغبة المستخدم في عدم إخفاء الحقول والأزرار ومكونات القائمة في حال عدم إتاحتها

#### تسجيل عميل جديد

- تم إضافة الحقلين (`فئة عميل - وتصنيف عميل`) في نافذة `تسجيل عميل جديد` في نقاط البيع. ولهما خيارات في إعدادات نقاط البيع لكل حقل منهم خيار للإضافة من عدمه وخيار هل هي مطلوبة أم لا

#### تحسينات أخرى

- تم تشغيل (`تصنيف الفاتورة`، و`مردود المبيعات`) بنفس طريقة عمل الخصم أي يتم الضغط عليها ويظهر `pop` للمستخدم الأعلى لكي يتم الموافقة وعمل الإجراء

#### طرق الدفع الحرجة

تم تحسين نقاط البيع بحيث لا يمكن لأي مستخدم استخدام أي طريقة دفع، حيث تم تعريف بعض طرق الدفع على أنها **طرق دفع حرجة**. لدعم هذه الخاصية، تم إضافة الخيارين التاليين:
- الخيار **"طريقة دفع حرجة لنقاط البيع"** في ملف `طريقة دفع`
- الخيار **"منع استعمال طرق الدفع الحرجة بنقاط البيع"** في صلاحيات نقاط البيع

#### تحسينات إضافية

- تم عمل `round` للقيمة الموجودة بحقل الخزينة التي تظهر عند الدفع
- تمت إضافة الحقول التالية لجدول `مبيعات نقاط البيع`:
  - `tax1Total`, `tax2Total`
  - `discount1Total` to `discount8Total`
  - `afterDiscount1` to `afterDiscount8`

### الإعدادات

#### نافذتي الصلاحيات والمستخدم

تم إظهار الحقول التالية إلى كل من **نافذتي الصلاحيات والمستخدم**:
- أقل عدد حروف للبدء بالبحث
- أقصى عدد مرات طباعة
- السماح بمطالعة سجلات الآخرين في البحث  
- منع عرض قائمة المزيد
- الاستيراد
- التصدير

تم إظهار الحقول التالية إلى **نافذة الصلاحيات**:
- نسخ من
- نسخ إلى

#### مسارات الكيان الجديدة

- تم إضافة مسار كيان جديد بالاسم `EAGuessEntityFromNames` لاستنتاج اسم الصنف عند إدخال اسم مشابه له

#### جدول Popup In Reference Open

تم إضافة جدول جديد بالاسم **"Popup In Reference Open"** بإعدادات الحقول والشاشات، والذي يمكن من خلاله تحديد حقول معينة بحيث عند الضغط على الحقل الأزرق بالحقل، يتم فتح النافذة في نفس شاشة الإدخال بدلاً من فتحها في تاب جديدة، وكذلك عند إضافة النجمة (`*`) بحقل الحقل مع تحديد عدد الأنواع. يتم تفعيل هذه الخاصية مع جميع الأنواع، وإذا تم وضع النجمة بدون اختيار نوع، تعمل على جميع حقول النظام

#### التعامل مع ملفات الإكسل

تم تطوير `مسار كيان` يقوم بالتعامل مع ملف الإكسل المرفق بعرض المشتريات، بحيث يقوم بإنشاء `عرض أسعار مشتريات` بناءً على المعلومات المدرجة بملف الإكسل المرفق

#### تحسينات المستخدم

- تم إلغاء الخيار **"إمكانية مطالعة جميع القوائم"** بنافذة المستخدم

#### معلومات الضرائب

تم إضافة **المجموعة الخاصة بمعلومات الضرائب** في شاشات (`مقاول الباطن` - `جهة ذات صلة`) وأي ذمة يمكن أن تتعامل مع الضرائب والتي تحتوي على الحقول التالية:
- `taxInfo.taxRegNo`
- `taxInfo.fileNo`
- `taxInfo.supplier`
- `SpecifiedMission`
- `DealNature`

وكذلك تم إضافة حقل باسم **"نوع العميل"** ويحتوي على الاختيارات التالية:
- جهة حكومية
- قطاع خاص  
- فرد طبيعي

كما تم إضافة الحقل **"رقم البطاقة الشخصية للأفراد"**

#### تحسينات أخرى

- تم جعل صفحة الـ `utils.html` مناسبة أكثر لشاشات الموبايل وكذلك الصفحات المنبثقة منها مثل (`Monitor Current Tasks`)
- تم منع عمل `regenui` إلا من على متصفح تم تسجيل الدخول عليه
- في نافذة `تخلص من الأصل`، تم تغيير اسم الجريد بالأسفل من التفاصيل إلى اسم يدل على طريقة عمله
- تم إضافة الخيار **"عرض المساعدة السريعة آلياً مع تغيير قيمة الحقل"** إلى جدول ربط المدخلات بالحقول بنافذة `تعريف مساعدة سريعة`
- تم تعديل تنفيذ مسار الكيان بحيث يقوم النظام بإظهار رسالة خطأ عندما يكون أحد المحددات بالقيمة `"null"`
- تم إضافة الخيار **"منع تنفيذ المسارات اليدوية لو كان المستند مسودة"** بمسار الكيان

#### تحسين Setup السيستم

تم التحسين بحيث عند عمل `setup` للسيستم أن يرفض الـ `installer` تنزيل السيستم في حالة وضع قيمة خاطئة في الحقل الخاص بـ الـ `extras`

### تطبيق الموبايل

- تم إضافة الاختيار **"print Normal"** للقائمة **"version sdk printing"** الموجود بشاشة الدخول وشاشة الإعدادات

### التقارير

#### تقارير البنوك

- تم إضافة التقرير **("بيان أوراق تجارية", "Statement Paper Financial")** بدلاً من تقرير `بيان أوراق قبض` (**SYSR-BNK001**) حيث أنه بعد التعديل أصبح التقرير للأوراق التجارية الصادرة أو الواردة وليست الواردة فقط

#### التقارير المالية

- تم إعادة هيكلة **التقارير الخاصة بنظام القوائم المالية**

## الأخطاء المُصححة

### نظام المخزون

#### طلب التجميع

- في بعض الأحيان، عند إضافة طريقة التجميع على السطر، يظهر الخطأ **"لم يمكن تنفيذ العملية"**

### نظام المشتريات

#### مقارنة عروض أسعار المشتريات

- بنافذة `مقارنة عروض أسعار المشتريات`، عند تفعيل الخيار **"عدم تحديث أفضل سعر مع الحفظ"** الموجود في رأس النافذة، واختيار عرض سعر يدوياً والقيام بالحفظ، يقوم النظام بإلغاء اختيارات جميع عروض الأسعار على السطور، والمفترض أنه عند الضغط عليها أن تظل اختيارات السطور كما هي ويسمح بالتعديل عليها والحفظ

#### شاشة عرض أسعار مشتريات

- في شاشة `عرض أسعار مشتريات`، عند الضغط على الزر **تخمين أسماء الأصناف** بعد إضافة شيت الإكسل، يقوم النظام بتحميل الشيت في وقت طويل ولا يقوم النظام بتنزيل الأصناف في حقل الصنف الخاص به

### نظام المبيعات

#### الأصناف المجانية

- عند وجود أصناف مجانية بفاتورة المبيعات، يقوم النظام بحذف هذه الأصناف المجانية بالخطأ عند تغيير التوجيه

### نظام الحسابات

#### توجيه مستند الصرف

- في توجيه `مستند الصرف`، عند وضع الجانب المدين والدائن ذمة واختيار نوع الذمة ووضع المراجع المتعلقة بها، فإنه عند عمل `سند الصرف` يقوم باختيار الحساب الموجود في الطرف المدين دائماً دون النظر إلى الطرف الدائن

#### سند صرف شيكات

- عند عمل `سند صرف شيكات` وهذا السند يقوم بإنشاء الشيك آلياً، فإنه في حالة عدم اختيار `دفتر الشيكات` وعمل حفظ المستند، تظهر الرسالة **"لا يمكن تنفيذ العملية"**، والصواب تغيير الرسالة إلي **"مطلوب اختيار الدفتر"**

### نظام المقاولات

#### مشاكل عامة

- في بعض الأحيان، عند اختيار `info field show` والضغط بالزر الأيمن للماوس على أي `system field` لا يظهر الـ `info field` الخاص بتلك الحقول. مثال على ذلك: حقل رقم سند الغرامة الموجود في `مذكرة الخصم`
- في بعض الأحيان، عند حفظ `مستخلص مقاول باطن`، يظهر الخطأ **"لا يمكن تنفيذ العملية"**

#### مستخلص مقاول باطن

- عند وجود سطر به بند رئيسي وإدخال `سعر الوحدة` والحفظ، لا يتم تفريغ حقل `سعر الوحدة`، والصواب أنه مع الحفظ عند وجود سعر الوحدة على أي سطر به بند رئيسي أن يتم تفريغ سعر الوحدة وكذلك حقول الكميات باستثناء حقول الإجماليات

### نظام الموارد البشرية

#### سند الراتب

- في بعض الأحيان يحدث خطأ في حساب `سند الراتب` حيث يتم احتساب يوم غياب بالرغم من عدم غياب الموظف في يوم الغياب المذكور

#### سند المأمورية

- في بعض الأحيان، لا تظهر `سندات المأموريات` في `سند الراتب` ولا يحسب `إضافي المأمورية`

### نظام التصنيع

#### مشاكل إنشاء الآلات

- لا يتم إنشاء آلات تلقائياً عند تشغيل مسار كيان:  
  `com.namasoft.infor.domainbase.util.actions.EAGroovyAction`

### الإعدادات

#### مشاكل Recommit

- عند عمل `recommit`، يقوم النظام بالتعرف على مشكلة في أحد السندات ويعرض المشكلة في رسالة ولكنه لا يعرض في أي سند توجد المشكلة، والصواب أن تتضمن الرسالة رقم السند الذي توجد به المشكلة للدخول وحل المشكلة

#### مشاكل تعديل الشاشة

- عند التعديل بقائمة العرض بنافذة `تعديل شاشة`، يقوم النظام بتكرار الأعمدة. تم منع تكرار الأعمدة
- عند عمل `تعديل شاشة` لأمر البيع وإضافة `مندوب البيع` ضمن الأعمدة المعروضة، إذا كان هذا الموظف ليست لديه صلاحية مطالعة الموظفين فإن النظام يرفض عرض أي شيء في قائمة العرض لأمر البيع وتظهر رسالة خطأ فارغة

### نظام إدارة المشاريع

- عند عمل **إنشاء فواتير دورية** يظهر الخطأ **"لم يمكن تنفيذ العملية"**

### نظام الحسابات

#### مشاكل الأوراق التجارية

- عند إنشاء `سند قبض` أو `صرف شيك`، تظهر رسالة خطأ أن `دفتر الورقة التجارية` لا يمكن أن يكون فارغاً

### الجيوي الجديد

#### مشاكل التصنيفات

- عند تفعيل الخيار **"عرض علاقات تصنيف الأصناف"** بإعدادات إدارة التوزيع ثم ربط أحد التصنيفات بقسم محدد من خلال نافذة `تصنيف 1`، يقوم النظام بحذف القسم عند التخزين

#### مشاكل الموافقات والحقول

- الموافقات لا تعمل من داخل المستند
- عند ضبط بعض الحقول على أنها غير مفعلة من خلال إعدادات الحقول والشاشات، يقوم النظام بإظهارها

#### مشاكل فاتورة المشتريات

- عند الضغط على حقل **"كود الصنف"** بفاتورة المشتريات، لا يقوم النظام بعرض أي أصناف وأحياناً يتعطل النظام ويظهر الخطأ **"لا يمكن تنفيذ العملية"**
- في بعض الأحيان، لا يقوم النظام بإظهار المراجع عند محاولة الاختيار منها، مثل المرجع **"ذمة المستند"** بفاتورة المشتريات وذلك في حالة اختيار المورد أولاً

#### مشاكل أخرى

- عند تفعيل **"الحقول التي يتم فتح الإنشاء عند إدخال كود غير موجود"** لأحد الحقول من خلال إعدادات الحقول والشاشات، لا تعمل بشكل صحيح

### نظام نقاط البيع

#### مشاكل الطباعة والعرض

- يحدث خطأ عند **إعادة طباعة** لفاتورة مبيعات نقاط بيع
- يحدث خطأ عند الضغط على **تفاصيل الدفع** للفاتورة في قيمة الآجل
- حقل **الكمية** الموجود في رأس فاتورة نقطة البيع غير واضح مع إعدادات العرض `1024*768`
- **رقم السطر** لا يظهر عند إعدادات الشاشة `1024*768`

### التقارير

#### تقرير الأصول العام

- تم تعديل مسميات المحددات وتصحيحها بالتقرير **"SYSR-AST003"** (`تقرير الأصول العام`)

</div>