# نما إي آر بي - ملاحظات الإصدار نوفمبر 2020

<div dir="rtl">

::: info معلومات الإصدار
**تاريخ الإصدار:** نوفمبر 2020  
**رقم الإصدار:** Nama-ERP-202011  
**نوع الإصدار:** تحسينات وإضافات جديدة
:::

## الإضافات

### نظام المشتريات

- بمسار الكيان **"إنشاء أوامر شراء من عرض أسعار مشتريات لكل مورد"**، تم إضافة `بارامتر` يمكن من خلاله تحديد معيار على السطور وسيقوم بتطبيق المسار على هذه السطور فقط
- تم تطوير مستند جديد بالاسم **"مقارنة أسعار مشتريات"**، وذلك للاطلاع على الأسعار المتوفرة للأصناف بقوائم أسعار المشتريات وعروض الأسعار ثم اختيار أقلها لإصدار أوامر شراء بها

### نظام الحسابات

- تم إضافة الخيارات التالية بنافذة **"توزيع الحسابات"**:
  - توزيع على القطاعات الموجودة في الجانب الآخر
  - معيار القطاعات في سطور الجانب الآخر
  - توزيع على الفروع الموجودة في الجانب الآخر
  - معيار الفروع في سطور الجانب الآخر
  - توزيع على الإدارات الموجودة في الجانب الآخر
  - معيار الإدارات في سطور الجانب الآخر
  - توزيع على المجموعات التحليلية الموجودة في الجانب الآخر
  - معيار المجموعات التحليلية في سطور الجانب الآخر
  - توزيع على السجلات الموجودة في الجانب الآخر
  - معيار السجلات في سطور الجانب الآخر
  - توزيع على المرجع رقم 1 في الجانب الآخر
  - معيار مرجع 1 في سطور الجانب الآخر
  - توزيع على المرجع رقم 2 في الجانب الآخر
  - معيار مرجع 2 في سطور الجانب الآخر

- تم التحسين بحيث عند إضافة الفاتورة في `التحويل البنكي`، تؤثر في المدفوع في الفاتورة المربوطة وتعامل معاملة `سند القبض`
- تم إضافة **3 مرفقات** في `سند القبض` و`سند الصرف`
- **سند الصرف**: عند اختيار `بناء على سجل راتب`، تم التحسين بحيث يتم ملء السطور بسطور سندات الرواتب الموجودة في سجل الراتب المحفوظة `حفظ نهائي` فقط وتجاهل المسودات
- تم إضافة عدد **5 مرفقات** في رأس `سند القيد`

#### ملف إعدادات قائمة مالية

تم إضافة التالي:
- `صندوق اختيار` في السطور باسم **اختيار السطر**
- **3 أزرار** في ملف إعدادات القوائم المالية لعمل التالي:
  - اختيار كل السطور
  - إلغاء كل السطور
  - عكس السطور المختارة

- قائمة في رأس الملف للحقول التالية بعنوان **الإعدادات الافتراضية** مع تطبيق `post action` على السطور المختارة عند التغيير في إحدى هذه القيم:
  - تغيير (**مدين - دائن**) للسطور المختارة
  - تغيير (**الرصيد - الحركة - الافتتاحي**) للسطور المختارة
  - تغيير (**معادلة حساب الافتتاحي**) للسطور المختارة
  - تغيير (**معادلة حساب الإجمالي**) للسطور المختارة
  - تغيير (**المستوى**) للسطور المختارة
  - نوع القائمة وتحتوى على (**Income Statement - Balance Sheet- Cash Flow**) بحيث عند اختيار الـ `source` في السطر يتم أخذ نوع القائمة في الحسبان

- زر **تفريغ الأكواد**
- إضافة عمود جديد باسم **"قصر البحث على"** خاص بـ `pathText` في سطور الإعدادات المستندات المذكورة

#### في ملف إصدار قائمة مالية

تم عمل التالي:
- إضافة حقل **نوع المقارنة**
- عمل `post action` على ملف الإعدادات بحيث عند اختيار الملف يقوم النظام بإدراج `default values` من ملف الإعدادات

### نظام البنوك

- **نافذة التحويل البنكي**: تم اعتبار التحويل البنكي عند عمل تجميع للفواتير باعتبار أنها مدفوعة في الفواتير
- تم التحسين بحيث أنه عند إضافة الفاتورة في `التحويل البنكي` أن تؤثر في المدفوع في الفاتورة المربوطة وتعامل معاملة `سند القبض`

### نظام المقاولات

- **شاشة الإحصائيات** داخل عقد المشروع لا تعرض المستخلصات المرتبطة بالمشروع بشكل صحيح

### نظام الاستثمار العقاري

- تم إنشاء الخيار **"نسخ الورقة المالية إلى سطور الدفعات عند عمل سند قبض لورقة مالية شيك بنكي"** في إعدادات الاستثمار العقاري

### نظام إدارة المستشفيات

- بمستند `نقل التسكين`، تم عمل `فلتر` بحقل الاستمارة ليقوم النظام بالبحث على من لهم تسكين فقط

### نظام التصنيع

- تم إضافة `قائمة اختيار` في توجيه مستند `تنفيذ إنتاج` باسم **نوع فحص الجودة المنشأ** ويحتوي على (**طلب فحص جودة - مستند فحص جودة**) ويتم إنشاء أي منهم بناء على اختيار الدفتر - `نوع فحص الجودة المنشأ` في التوجيه
- تم إضافة `دفتر وتوجيه` لمستند `فحص الجودة` في توجيه `تنفيذ إنتاج` ولا يتم إنشاء مستند فحص الجودة إلا بعد إضافة الدفتر

### نظام الجيوي الجديد

- تم إضافة الخيار **"استعمال الجداول التفصيلية بشكل افتراضي في الموبايل"** إلى الإعدادات العامة وذلك حتى يتم إظهار شاشة تعديل الجداول التفصيلية في الأجهزة المحمولة افتراضياً - وكذلك إضافة تذكر فتح شاشة التعديل التفصيلية على أجهزة الكمبيوتر والهواتف المحمولة

### نظام الأصول الثابتة

- تم إضافة الحقل **"مستند استلام أصل"** في تفاصيل العهد بنافذة `الأصل الثابت`
- تم إضافة الخيار **"استعمال الجداول التفصيلية بشكل افتراضي في الموبايل"**

### نظام نقاط البيع

- تم إضافة زر بنقطة البيع **لإعادة ضبط الأعمدة** في الفواتير ليكون بالعرض الأصلي إذا تم تغيير عرض الأعمدة
- تم إضافة الحقلين **"نسبة ارتفاع جدول المبيعات"** و**"ارتفاع أزرار الاختصارات"** لجدول تعديل الأحجام (يظهر من مساعدة)
- تم إنشاء `مستند مرجع مجمع` يحتوي على جدول تفاصيل يقوم بإنشاء ملف المرجع المنقول إلى نقاط البيع

### الإعدادات

- تم إضافة الخيار **"jasper-no-threads"** إلى الملف `nama.properties` وذلك لجعل التقارير تعمل في `Thread` واحد فقط
- تم إضافة عدد **5 حقول** (`date`) في صفحة السيارة - جدول تفاصيل العهد
- تم إضافة الحقل **"أقصى عدد لسطور السندات والملفات"** إلى الإعدادات العامة
- تم إضافة الجريد **"أقصى عدد لسطور السندات والملفات"** إلى إعدادات الحقول والشاشات

### تطبيق الموبايل

- تم السماح بإظهار الحقول التالية عند طباعة أوامر البيع:
  - `{createdAtDate}`
  - `{createdAtTime}`
  - `{salesmanFromSettings}`

- كما تم إضافة `اللوجو` الخاص بالشركة في إعدادات `moduleapps` ليتم استخدامه في الطباعة من خلال التالي:
  ```html
  <img width='200' height='150' src="{companyLogo}" align="middle" alt="">
  ```

### التقارير

- تم إضافة `هايبرلينك` إلى كود الأصل لفتح شاشة `الأصل الثابت` في تقرير الأصول العام (**SYSR-AST003**)

## الأخطاء المُصححة

### نظام المخزون

- في مستند `طلب تجميع` - الأصناف الموردة، عند إضافة الصنف وطريقة التجميع على السطر يظهر الخطأ **"لا يمكن تنفيذ العملية"**

#### طلبات التجميع

- عند إضافة طريقة تجميع في الأصناف الموردة تظهر الرسالة **"لم يمكن تنفيذ العملية"**، والصواب معالجة هذه الرسالة مع مراعاة أنه عند إضافة طريقة تجميع أن يتم فردها كما هو الحال في سندات التجميع
- عند عمل المستند يدوي والذهاب إلى `سند التجميع` ووضع الطلب في `بناء على` (`سند تجميع بناء على طلب تجميع`) تظهر الرسالة **"لم يمكن تنفيذ العملية"**

- بعد منح صلاحية باستخدام `السجلات الممنوعة من الاستخدام` في الإدخال والتعديل، لا يقبل النظام باختيار صنف ممنوع من الاستخدام في سطور سندات المخازن
- في بعض الأحيان، تفشل معالجة `سند التحويل`

### نظام المشتريات

- عند إدراج نفس الصنف بأمر الشراء ولكن على سطرين، بحيث يكون أحد السطرين مجاناً تحدث مشكلة بتكليف الأصناف
- عند إزالة سطر `التوريد المخزني` من فاتورة المشتريات يظهر الخطأ **"لا يمكن تنفيذ العملية"**
- عند عمل `قائمة أسعار مشتريات` تحتوي على نفس الصنف ولكن مقاسات مختلفة، عند عمل أي حركة فإن النظام لا يأخذ المقاس في الاعتبار ويحضر السعر الخاص بأول مقاس فقط
- عند إنشاء أمر شراء لأفضل سعر من `مقارنة عروض مشتريات` لا يظهر المورد، والصواب أن يظهر المورد في رأس نافذة `أمر الشراء`

### نظام المبيعات

- يحدث خطأ أحياناً عند التعديل في قوائم الأسعار

### نظام الحسابات

- عند عمل مستند `قيود ختامية`، يظهر الخطأ **"لم يمكن تنفيذ العملية"**

### نظام المقاولات

- عند عمل مستند `صرف خامات مقاولات` ثم عمل مستند `حصر تكاليف مقاولات`، لا تظهر تكلفة الصرف السابق في مستند حصر التكاليف إلا بعد عمل `ريكوميت` لمستند الصرف مرتين

#### عقد مشروع، عقد مقاول باطن

- لا يأخذ النظام الضريبة في اعتباره عند حساب الإجمالي، سواء على مستوى السطر أو على مستوى العقد كاملاً
- حقل الإجمالي الموجود بالشاشة الرئيسية يعرض الإجمالي قبل الضريبة والصواب أن يكون بعد الضريبة
- في شاشة `عقد المشروع` و`عقد مقاول الباطن`، `إجمالي السعر` يعرض `السعر * الكمية`، والصواب أن يقوم باحتساب قيمة الضرائب ضمن إجمالي السعر، كما أن قيمة الضريبة لا يتم احتسابها بشكل آلي من السعر بالرغم من وجود نسبة الضريبة على السطر
- في شاشة `مستخلص مشروع`، عند إضافة بند على السطر واختيار المرحلة سواء كانت مرحلة تركيب أو مرحلة التوريد يظهر خطأ

#### أخطاء المستخلص

- لا يمكن عمل `ريكوميت` للمستخلص إذا كان نوعه `مستخلص ختامي`
- عند عمل `سند غرامة مقاولات` ثم عمل مستخلص والضغط على **تجميع الشروط**، لا يقوم النظام باستحضار بيانات السند إلا بعد حفظ السند مسودة
- عند عمل `سند غرامة` يحتوي على شرط `نوع تأثيره أخرى`، فإنه عند عمل المستخلص وتجميع الشروط، يقوم النظام بوضع القيم في حقل **"الخصم"** وليس حقل **"أخرى"**

### نظام الأصول الثابتة

- **مستند جرد أصل ثابت**: لا يقوم النظام باحتساب الأصل الثابت عجز على الموظف في حين أن الأصل في عهدة الموظف

### نظام الموارد البشرية

- يوجد خطأ أحياناً في احتساب `التأخير` الخاص بالموظف
- في بعض الأحيان، لا يقوم النظام بإدراج قيمة `المفرد` بسند الراتب بالرغم من أن له قيمة في `العرض الوظيفي`
- `نظام التأمين الطبي` لا يظهر لدي العميل مع أحد الإصدارات رغم وجوده برخصة العميل
- في حالة إخفاء حقول في ملف `الصلاحيات` (`صلاحيات الحقول`) بالنسبة لمستخدم، عندما يقوم المستخدم بتصدير الملف أو المستند، تظهر الحقول المخفية في شيت الإكسل
- في بعض الأحيان، عندما يحضر الموظف قبل موعد الدوام، لا يقوم النظام باحتساب دوام الموظف
- النظام لا يحتسب `نسيان بصمة الدخول` أو `الخروج` أيام العطلات الأسبوعية
- عند عمل `سجل راتب` يحتوي على عدة `سندات راتب` بعضها محفوظ `حفظ نهائي` وبعضها مسودة، ثم عمل `سند صرف` (حسابات)، يتم صرف كل سندات الراتب حتى المحفوظة مسودة، وعند العودة لسجل الراتب والضغط على **حفظ جميع المسودات** يظهر خطأ

### نظام التصنيع

- تم إنشاء `سند تنفيذ إنتاج` وبعد تنفيذ أول عملية، تم عمل سطر لسحب عينة وعند اختيار **إنشاء مستندات سحب العينة آلياً** في رأس السند والحفظ، يظهر خطأ

### الإعدادات

#### نافذة قائمة عرض مخصصة

- تم عمل الشاشة على `أمر الشراء`، وتم إضافته إلى شاشة `عرض السعر` التي يوجد بها `أمر الشراء` في `ref1`، وتم اختيار حقل الفلتر `ref1` ولكن عند العرض لا يوجد أوامر شراء

#### قوالب القيم الافتراضية

- عند عمل أكثر من `قالب قيم افتراضية` يدوي (`التطبيق مع قيم الحقول`) بنفس الحقل لكن مع اختلاف قيمة المرجع فإن القالب الأخير فقط هو الذي يعمل

#### صلاحيات خاصة

- تم إضافة `صلاحيات خاصة` بتصدير واستيراد السجلات
- في بعض الأحيان يؤدي الأمر **"UI Regenerate"** إلى أخطاء

#### ملف الصلاحيات

- عند تحديد بعض الحقول على أنها `Fields Disabled` على مستوى قائمة أنواع، يقوم النظام بتطبيق هذا الإعداد على جميع الأنواع

### نظام إدارة المستشفيات

#### المهمة المجدولة للتمديد

- عند تشغيل `المهمة المجدولة` المسئولة عن تمديد عقود الإيجار المنتهية آلياً، يقوم النظام بإنشاء سطر قسط للتأمين بالرغم من تفعيل الخيار **"عدم إنشاء قسط مع التمديد"**، وكذلك لا يقوم النظام بوضع علامة صح مع `البوليان` المنسوخ من عقد سابق في صفحة المصروفات
- في بعض الأحيان، لا يقبل النظام تسجيل **"نقل تسكين"**

### نظام الاستثمار العقاري

عند تطبيق السيناريو التالي:
1. عمل `عقد إيجار افتتاحي` مثلاً بمبلغ 1200 يحتوي على مصروف `تأمين 500` (المصروف يحتوي على خيار `عدم نقل المصروف مع التمديد`)
2. عمل `تمديد للعقد`
3. تخفيض قيمة العقد مع التمديد إلى 1000 بدلاً من 1200
4. الضغط على زر **إنشاء الإيجارات**

يقوم النظام باحتساب قسط للتأمين بالرغم من تفعيل الخيار **"عدم إنشاء قسط لمصروف التأمين مع التمديد"**

#### نافذة عقد مقاول باطن

- جريد الدفعات: عمود **النسبة** لا يعطي أي بيانات

### تطبيق الموبايل

#### أندرويد 7

- عند تشغيل تطبيق `أوامر البيع` على أندرويد 7، يحدث خطأ أثناء التسجيل وأثناء عمل تحديث
- لا يتم الاختيار من `قائمة البحث` بشكل صحيح على أندرويد 7 فقط
- حقل `إدخال كود الصنف` لا يظهر بشكل صحيح كحقل الكمية على أي إصدار أندرويد
- تم زيادة عرض `حقول البحث` عن الأصناف لتقوم بملء عرض الشاشة بدلاً من تركيزها بمنتصف الشاشة على أي إصدار أندرويد

#### حفظ الإعدادات

- عند حفظ الإعدادات لوحظ عدم احتفاظ التطبيق بعدد السجلات في الصفحة وتركيز `جودة الطباعة`

### الجيوي الجديد

#### مدخلات التقارير

- `مدخلات التقارير` المدمجة في الشاشات لا تعمل بطريقة صحيحة

#### فاتورة المتنوعات

- في الجيوي الجديد في `فاتورة المتنوعات` يوجد زرار يقوم بإنشاء `فاتورة متنوعات` (نسخة أخرى) باسم **IPO**. الزرار لا يقوم بإضافة الدفتر والتوجيه رغم أنه موجود في سطور الزرار ويعمل في الجيوي القديم
- عند مسح أحد `فواتير المتنوعات` من المعروض بالقائمة، يتم مسحه ولكن تظهر رسالة **"خطأ"**

#### سلة المحذوفات

- في سلة المحذوفات، عند استعادة أي مستند محذوف يظهر الخطأ **"فشلت العملية"**

#### Descriptors

- عند استخدام `Descriptors` (`بحث فقط`) أو (`عنوان وبحث`) ويكون الخيار **"عدم استعمال الوصف في عنوان"** في الإعدادات العامة مفعل يتحول اسم الصنف في الفاتورة إلى الصيغة الموجودة في الـ `Descriptors`

#### تصفح نما من الموبايل

- عند فتح نما من الموبايل والبحث عن صنف ثم الضغط على الصنف المراد، لا يقوم النظام بفتح شاشة الصنف وإنما يقوم بفتح شاشة صنف جديدة

### نظام نقاط البيع

- عند العمل على قاعدة بيانات جديدة لا يمكن فتح نظام نقاط البيع

### نظام مراكز الخدمة

#### أمر شغل صيانة

- في بعض الأحيان، عند إنشاء `أمر شغل صيانة` والضغط على **إنشاء فاتورة للعمل**، يحدث الخطأ **"لم يمكن تنفيذ العملية"**
- في بعض الأحيان، لا يتم صرف `قطع الغيار` تلقائياً عند عمل إغلاق لأمر الشغل مع العلم أنه تم تحديد هذا الاختيار بأمر الشغل ولم يتم استدعاء لتفاصيل المهمات أو قطع الغيار

### تطبيق الموبايل

#### تطبيق Nama ESS

- في تطبيق `Nama ESS`، عند اختيار `كومبو بوكس` معين تظهر الاختيارات متكررة على اختيار واحد فقط. مثال على ذلك، إذا كان يوجد 10 مخازن بأسماء مختلفة وعند الضغط على الكومبو لاختيار مخزن، تظهر الـ 10 مخازن على هيئة المخزن الأول متكرر

### التقارير

#### تقرير كشف حساب ذمة

- عند عرض تقرير `كشف حساب ذمة` (**SYSR-ACC031**)، يظهر محدد (`parameter`) **نوع السجل** القسم الوظيفي افتراضي وبالتالي عند عرض التقرير لا تظهر البيانات

</div>