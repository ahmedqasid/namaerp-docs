<rtl>

::: info معلومات الإصدار
**تاريخ الإصدار:** مايو 2020  
**رقم الإصدار:** 2020.05
:::

# ملاحظات الإصدار - مايو 2020

## **الإضافات**

### **نظام المخزون**
- **مستند لجنة جرد**: تم إضافة الخيار `تضمين الكميات المكشوفة (السالبة)` إلى زر التجميع نفسه (عند الضغط عليه)
- تم إنشاء ملف `إيقاف تأثير التكاليف على الحسابات` `FrozenCostAccounts` في قائمة المخازن تحت مجموعة الملفات لتحديد فترة محددة لإيقاف تأثير التكاليف على الحسابات
- تم إضافة 3 أنواع توزيع تكلفة إضافية جديدة - توزيع على `N1` - توزيع على `N2` - توزيع على `N3`
- تم نقل حقل الذمة إلى سطور توزيع التكلفة اليدوي على الأصناف بسند تكاليف إضافية وأيضاً نقل كمية الصنف إلى السطور الخاصة بالتوزيع، كما تم تحديث الحقل `originInvoiceLineId` بالجدول `SystemAddCostLine` طبقاً لربط مرجع الصنف مع كميته
- تم تحسين النظام بحيث يمنع المستخدم من عمل ريكوميت للمستند إذا كان مسودة عند تفعيل الخيار `Do Not Check Over Draft With Recommit` بإعدادات إدارة التوزيع، كما تم تجاهل هذا الخيار إذا كان المستند مسودة

### **نظام المبيعات**
- تم تفعيل الخيار `الالتزام بقوائم الأسعار` في توجيه مردودات المبيعات

### **نظام الحسابات**
- تم إضافة إمكانية منع إصدار حركة على حساب إذا تخطت هذه الحركة قيمة الموازنة المرصودة للحساب

### **نظام الموارد البشرية**
- **خطة الدوام**: تم جعل الأولوية في رأس الملف غير مطلوبة والأولوية في السطور تكون مطلوبة، ولا يتم نسخ الأولوية من رأس الملف إلى السطور إلا إذا لم تكن صفر
- تم عمل `Migrator` لعمل الآتي في الجداول النظامية (`SysVacTransactionBalance`, `SysVacationsBalanceByDate`):
  - تغيير الـ `vacationDocId` و `entityType` لـ `genericreference` وتسميته `owner`
  - تغيير الـ `workingstartDocId` لـ `genericreference` وتسميته `workStartdingDoc`
- تم إضافة `ListView` للإجازات في شاشة الموظف من الجداول التالية:
  - `SysVacationsBalanceByDate` - وهذا للنظام الخليجي
  - `SysVacBalanceTransaction` - وهذا للنظام المصري
- **ملف متقدم للعمل**: تم إضافة اختيار جديد بحقل حالة المقابلة يسمى `بانتظار مقابلة أخرى`
- تم إضافة الخيار `إعادة تعيين` لكل من `شاشة العرض الوظيفي`، `شاشة العرض الوظيفي المجمع` والسطور الخاصة به

### **نظام المقاولات**
- **عقد مقاول الباطن**: في كل من حقل كود بند الموازنة التنفيذية وحقل كود بند الموازنة التقديرية، تم السماح بظهور البنود الرئيسية
- **نافذة حصر كميات الموازنة**: عند اختيار الموازنة والضغط على تجميع البنود، تم إضافة أسعار الموازنة والكميات

### **نظام إدارة المستشفيات**
- في توجيه فاتورة العمليات تم إضافة الحقول التالية:
  - مدين تكلفة فتح عملية / دائن تكلفة فتح عملية
  - مدين تكلفة أتعاب جراح / دائن تكلفة أتعاب جراح
  - مدين تكلفة مساعد جراح / دائن تكلفة مساعد جراح
  - مدين تكلفة أتعاب تخدير / دائن تكلفة أتعاب تخدير
  - مدين تكلفة أخرى / دائن تكلفة أخرى
- **مستند تسكين مرضى**: تم إضافة قائمة عرض بفواتير الإقامة المرتبطة بمستند التسكين
- **فاتورة الإقامة**: تم إضافة قائمة عرض بفواتير الإشراف الطبي المرتبطة بفاتورة الإقامة

### **نظام التصنيع**
- تم إضافة سند جديد بالاسم `تسعير منتج نهائي`
- تم إضافة الخيار `إدراج الصنف المصنع عند اختيار تم النسخ من أو بناء على` في إعدادات التصنيع
- **سند التخطيط**: تم حذف قائمة `نوع المستند` بكل من الصفحات `الرئيسية`، `مطلوب`، `التحليل`، وتم استبدال هذه القائمة بصفحة `مخطط المشتريات` بالقائمة `نوع مستند الشراء المنشأ` والتي تحوي الخيارات الثلاثة (أمر شراء، أمر شراء تخطيط، طلب شراء)، وبقيت القائمة كما هي بصفحة `مخطط الإنتاج` ولكن بالاسم `نوع مستند الإنتاج المنشأ`

### **نظام الأصول الثابتة**
- تمت إضافة الخاصية `maxCacheSize` والتي تعبر عن أقصى عدد من المعلومات المخزنة على الذاكرة المؤقتة والخاصية `cacheClearCount` والتي تعبر عن عدد المعلومات أو السجلات التي سيتم حذفها من الذاكرة. يجب تعريفهم في ملف `properties.nama` للأجهزة ذات حجم الرامات القليلة. مثال على ذلك، عند تعريف الخاصية الأولى `maxCacheSize=1000` والثانية `cacheClearCount=400` فإن هذا يعني - عند وصول عدد السجلات على الرامات إلى 1000 سجل، فإن النظام سيقوم بحذف آخر 400 (أقدمهم استعمالاً)
- تم إضافة 5 خيارات لإعدادات نقاط البيع باسم (عدم حفظ آخر شاشة لفاتورة المبيعات - عدم حفظ آخر شاشة لمردود المبيعات - ... الخ) والمقصود منه عدم حفظ بيانات آخر شاشة لم يتم حفظها. توفيراً للميموري يجب تفعيل هذه الخيارات
- تم إضافة الخيار `السماح بعمل مستندات إهلاك سابقاً لتاريخ سندات (إضافة واستبعاد وتخلص جزئي)` في توجيه سند الإهلاك

### **نظام نقاط البيع**
- في الشكل الجديد لنقاط البيع، تم عمل الآتي:
  - إضافة زر تحليل النقدية لشاشة الوردية
  - إضافة الوقت والتاريخ والمستخدم للشاشات
- تم إضافة جريد جديدة بالاسم `المستندات المفضلة` بكل من ملف `إعدادات نقطة البيع`، `الماكينة`، وذلك حتى يمكن الوصول لأحد المستندات المفضلة بالنقر عليه مباشرة بدلاً من فتح قائمة المساعدة أولاً
- تم إضافة الخيار `shortcutImgBtnsToTextBtns` لإعدادات نقاط البيع. يقوم هذا الخيار بجعل أزرار الاختصارات مثل (الآلة الحاسبة - لوحة المفاتيح - قفل الشاشة ...) وأزرار القائمة من أزرار تحتوي على صور ونص إلى أزرار نصية فقط
- تم تغيير شكل شاشة الدفع المتعدد حيث أن حقل الملاحظات كبير جداً يأخذ أكثر من نصف الشاشة وتم نقل الأرقام وزر لوحة المفاتيح وزر التأكيد إلى يسار طرق الدفع
- تم إضافة تصنيف السجل إلى جدول (المستندات المفضلة) مع السماح بتكرار نفس نوع المستند في حالة اختلاف تصنيف السجل

### **الإعدادات**
- تم إدراج كل الـ `Conflicts` في حقل اللوج ليتم حلهم في الترجمة
- **نافذة مفضلة مستخدم**: تم السماح بتكرار الملف/المستند إذا اختلفت أحد الاختيارات مثل نوع البند أو المعايير أو غيرها
- **ملف تعريف تنبيهات**: في الجدول `السماح بإرسال الرسائل والبريد الإلكتروني في الأوقات التالية (وجعلها في أقرب وقت ممكن إذا كانت خارج الفترات)`، تم إضافة 7 حقول بعدد أيام الأسبوع، لكي يتم تجنب إرسال التنبيه في أيام الإجازات مثل الجمعة
- تم التحسين بحيث تظل حالة التنبيه مؤجلة عند استخدام الجدول (السماح بإرسال الرسائل والبريد الإلكتروني في الأوقات التالية (وجعلها في أقرب وقت ممكن إذا كانت خارج الفترات))
- عند استيراد تقرير من خلال `Repo Implementation Open` والتعليم على الخيار `جلب التقارير المدققة فقط` فإنه لا يتم استيراد التقرير لأنه غير مراجع
- تم تمكين البحث الرئيسي بالبرنامج من البحث الذكي بالنوع `EntityType` بالإضافة إلى الحقول

## **أخطاء**

### **نظام المخزون**
- في بعض الأحيان بنافذة سند تجميع وبعض النوافذ الأخرى، تظهر الرسالة `لا يمكن تنفيذ العملية`
- **سند التوريد المخزني**: عند إصدار سند توريد بناءً على أمر شراء، يسمح النظام بإدراج كمية أكبر من كمية أمر الشراء رغم متابعة الكمية

### **نظام المشتريات**
- قوائم أسعار المشتريات لا تعمل بصورة صحيحة مع فئة مورد

### **نظام المبيعات**
- **سندات الاستبدال**: عند تفعيل الخيار `إنشاء فواتير ومردودات مبيعات` ثم محاولة التعديل بالسند تظهر رسالة الخطأ `لا يمكن تعديل السطر رقم 1 لأن عليه 1 حركات`
- **سندات الاستبدال**: عند إنشاء سند الاستبدال، يقوم بإنشاء فاتورة ومردود، لا يقوم النظام بإظهارها في الإحصائيات مثل ما يتم في سند الصرف والتوريد
- عند استخدام الخيار `نسخ المتبقي إلى المدفوع نقداً` وإجمالي المدفوع أكبر من صافي الفاتورة يصبح المتبقي بالسالب ويتم نسخه إلى المدفوع نقداً والنظام لا يعترض على وجود قيمة سالبة في المدفوع نقداً
- عند عمل عرض على (أصناف مجانية على عدد أصناف الفاتورة) وعدم تفعيل الخيار (تفعيل العروض على عدد أصناف الفاتورة)، لا يقوم النظام بإظهار رسالة تنبيه فيظن المستخدم أن هناك خطأ في العرض نفسه ولا ينتبه للخيار، والصواب إظهار رسالة تنبيه

### **نظام الحسابات**
- **سند قبض الكاشير**: عند إضافة اسم المريض ثم استخدام بناء على استمارة دخول أو أي فاتورة طبية، لا يقوم السيستم بعمل فلتر على الفواتير أو الاستمارة الخاصة بالمريض، والصواب عند إضافة المريض واستخدام بناء على، أن يقوم النظام باعتبار المريض في الفلترة على حقول بناء على
- في سند القبض، عند إضافة عدد 2 سطر لنفس العميل لحسابات مختلفة بقيمة 500 مثلاً لكل سطر ثم فتح صفحة الفواتير في سند القبض وعمل تجميع للفواتير، تظهر كل الفواتير التي تخص العميل دون اعتبار المبلغ أو الحساب
- في بعض الأحيان، عند تفعيل الخيارات الخاصة بمنع إصدار حركة على حساب إذا تخطت هذه الحركة قيمة الموازنة المرصودة للحساب، تظهر مشكلة في أمر البيع بالرغم من أنه ليس له تأثير محاسبي
- عند عمل زر يقوم بفتح رابط بالصيغة التالية كمثال: `{openinnewwindow}https://namasoft.com/reqs/{code}`، فإن النظام يقوم بفتح الرابط بطريقة غير صحيحة

### **نظام الأصول الثابتة**
- عند إضافة توجيه سند تكاليف اعتماد أصل يظهر الخطأ `لا يمكن ترك الحساب فارغاً`
- عند إنشاء مستند تخلص جزئي من الأصل، لا يتم تعديل قيمة القسط وبالتالي أول سند إهلاك تكون بقيمة الإهلاك قبل التخلص (أي بكل عدد الأصول قبل التخلص)، وكذلك عند إلغاء مستند التخلص الجزئي من الأصل، يظل تأثير مستند التخلص الجزئي موجود في الجدول `FAproperties` وبالتالي يمنع التعديل في المستندات التي قبله
- في بعض الأحيان تفشل معالجة سندات الإهلاك بعد عمل `Reprocess`، كذلك عند عمل `Recommit` لسند الإهلاك، يرفض لوجود سند إهلاك تالي له وهو ما يجب تعديله، كذلك عند حذف السند يظهر الخطأ `لا يمكن تغيير حالة الأصل` رغم أن سند الإهلاك هو آخر عملية تمت على الأصل
- تم إضافة طريقة جديدة إلى مسار الكيان `EAFieldValuesCalculator` وبالتالي يمكن استعمالها أيضاً في الـ `Actions Post GUI`
- في بعض الأحيان، لا يمكن حفظ مستند التخلص الجزئي

### **نظام التصنيع**
- بنافذة التجميع الصادرة من خلال زر التجميع بمستند `تخطيط الموارد` العناوين التالية خاطئة:
  - `تضمن أوامر الإنتاج` وتم تغييرها إلى `تضمين أوامر الإنتاج`
  - `تضمن سندات الطلب اليدوية` وتم تغييرها إلى `تضمين سندات الطلبات اليدوية`
  - `تضمن سند التوقعات` وتم تغييرها إلى `تضمين سندات التوقعات`
- بمستند التخطيط - صفحة مخطط المشتريات تحوي الخطأين التاليين:
  - قائمة نوع الإذن تحتوي الخيارين (أمر إنتاج، طلب أمر إنتاج) بدلاً من (أمر شراء، طلب شراء)
  - قائمة المستند على نفس السطر تحوي جميع المستندات بدلاً من (أمر شراء، طلب شراء)
- بمستند التخطيط - صفحة مخطط الإنتاج: بتفاصيل النافذة قائمة المستند على نفس السطر تحوي جميع المستندات بدلاً من (أمر إنتاج، طلب أمر إنتاج)
- الحقلان (دفتر أمر شراء، توجيه أمر شراء) موجهان إلى مستند `طلب الشراء` الموجود بقائمة المشتريات والمفترض أن يكونا موجهين إلى مستند `أمر شراء تخطيط`، ولكن مستند `أمر شراء تخطيط` في الأصل ليس له توجيه
- الحقلان (دفتر طلب شراء، توجيه طلب شراء) موجهان إلى مستند `أمر الشراء` الموجود بقائمة المشتريات والمفترض أن يكونا موجهين إلى مستند `طلب الشراء` الموجود بقائمة المشتريات

### **نظام المقاولات**
- في بعض الحالات، عند حفظ عقد مقاول باطن، يظهر الخطأ `لا يمكن تنفيذ العملية`
- **سند صرف مواد خام**: صفحة إحصائيات لا تتضمن سندات الصرف المخزني المرتبطة
- **مستند الأعمال الهندسية اليومية**: لا يدعم النظام البحث في كود البند بناءً على عقد المشروع المدخل حيث يمكن إدراج أي قيمة مما لا يساعد في إصدار تقارير الأعمال المتعلقة بكل بند بالمشروع
- **مستند مردود خامات مقاول باطن**: قائمة بناء على تحتوي جميع المستندات بينما المفترض أن يكون حقل بحث يتم من خلاله إدخال مستند صرف خامات مقاول باطن فقط
- **مستند صرف خامات**: قائمة بناء على تحتوي جميع المستندات بينما المفترض أن تحتوي المستندات المحتملة فقط
- **مستند صرف خامات مقاول باطن**: قائمة بناء على تحتوي جميع المستندات بينما المفترض أن تحتوي المستندات المحتملة فقط

### **نظام نقاط البيع**
- بفواتير المردودات والاستبدال، لا يقوم النظام باستحضار تصنيف المستند سواء من نفس الماكينة أو من ماكينة أخرى
- في بعض الأحيان، لا يعمل النظام عند البدء بالواجهة الجديدة لنقاط البيع
- في الشكل الجديد لنقاط البيع، عند فتح شاشة بحث ثم استخدام مفتاح الإدخال (`Enter`)، لا يتم البحث وخاصة عند اختيار الأعمدة عند العرض
- عند عمل عرض أسعار مبيعات بحيث يكون نوع التخفيض قيمة ثابتة، لا يعمل أي لا تؤثر في فاتورة مبيعات نقاط البيع ولكن إذا تم اختيار نسبة ثابتة تعمل النسبة بصورة طبيعية
- عند تفعيل الخاصيتين `maxCacheSize` و `clearCacheCount` فإن بعض الأصناف تظهر بسعر خاطئ (صفر)
- في بعض الأحيان، ملف `threaddump` لا يعمل بشكل صحيح عند تشغيله من ملف الچار الموجود بمجلد نقاط البيع

### **نظام الموارد البشرية**
- **مستند سجل الرواتب**: في بعض الأحيان، عند الضغط على زر إصدار سند راتب، يظهر الخطأ `لا يمكن تنفيذ العملية`
- **مستند عرض وظيفي - نافذة الإجازات**: يرفض النظام الحفظ ويطلب إدراج أيام الإجازة المخصصة بالرغم من إدراج نوع إجازة به ملف أرصدة إجازة بناءً على الخبرات، والمطلوب أن يكون حقل أيام الإجازة المخصصة غير مطلوب في هذه الحالة
- في بعض الأحيان عند عمل سند إجازة والحفظ تظهر الرسالة `لا يمكن ترك مدة الإجازة فارغاً`
- في بعض الأحيان، عند عمل إعادة إصدار للرواتب من مستخدم معين لا يحدث شيء بينما يتم إعادة الإصدار من مدير النظام بدون مشاكل
- في خطة الدوام في حالة ربط الدوام بالموظفين عن طريق مجموعة الموظفين على أكثر من سطر، يتم إضافة دوام أول سطر لكل الموظفين على النظام بالكامل
- في بعض الأحيان، عند إعادة إصدار سجل الرواتب، تظهر رسالة خطأ أن الموظف ليس على رأس العمل
- في بعض الأحيان، عند حفظ المستند كمسودة وإعادة إصداره، لا يتم الحساب بشكل صحيح من أول إعادة إصدار، ويجب إعادة الإصدار مرة أخرى
- في خطة الدوام، عند تغيير الأولوية في رأس النافذة، لا تتغير على السطور
- **سند إجازة موظف**: عند اختيار تاريخ البداية بعد اختيار نوع الإجازة أو عند اختيار نوع الإجازة بعد اختيار تاريخ البداية تظهر رسالة الخطأ (لم يمكن العثور على سند إجازة بمعرف `ffff0001-71ee-af2b-1300-0000ff5e46be` وهذا المعرف غير موجود)
- **نافذة الموظف - المرافقون والجوازات**: عند البحث عن الكفيل أو محاولة فتح ملف العميل ينتج الخطأ `لم يمكن تنفيذ العملية`
- عند الضغط على حفظ كل المسودات في سجل الراتب ووجد النظام تعريف موافقة لسندات الراتب، فإن النظام لا يعتبر الموافقة ويتم حفظ السند مباشرة
- في تطبيق الحضور والانصراف `ESS` - إذا تم عمل تعريف موافقة، يتم طلب الموافقة مع تسجيل الحضور - وتحدث مشكلة عند تسجيل الانصراف
- عند عمل عرض وظيفي لموظف قد ترك الخدمة بسند إنهاء خدمة ثم عاد بعد فترة، يظهر خطأ
- عند تغيير نوع الإجازة لسند إجازة تم حفظه، تظهر رسالة الخطأ `لم يمكن تنفيذ العملية`
- عند إضافة سند إجازة لموظف ليس له عرض وظيفي واختيار نوع الإجازة أو تاريخ البداية، تظهر رسالة الخطأ `لم يمكن تنفيذ العملية`

### **نظام إدارة المستشفيات**
- يحدث خطأ عند الحفظ إذا تم ضبطه بحيث يقوم بإصدار سند توريد مخزني في كل من المستندات التالية:
  - مستند مردود مستلزمات
  - مستند مردود صيدلية
  - مستند مردود بنك دم
- الحقل `بناء على` بمستند مردود صيدليات خاص بملف صيدلية وليس بفاتورة صيدلية
- في كل من مردودات بنوك الدم، مردودات المستلزمات، ومردودات الصيدليات، يقوم النظام بصفحة المستندات المرتبطة بعرض ترجمة خاطئة `مستندات الصرف المخزني` بدلاً من `مستندات التوريد المخزني`

### **الإعدادات**
- في التنبيهات عند استخدام (قالب محتوى التنبيه) التي بأسفل (قوالب تنبيهات تطبيقات الجوال)، يتم إرسال التنبيه العادي مرتين للمستخدم على نما
- يحدث خطأ عند عمل `recommit` لمستند تم إصداره عن طريق مستند آخر

### **تطبيق الموبايل**
- التطبيق الخاص بالموظفين يكرر التنبيه في العرض بحيث أن كل تنبيه يعرض مرتين عند الضغط على قائمة التنبيهات. فمثلاً لو عدد سجلات فواتير المبيعات 1000 وكل فاتورة بها سطرين. في حالة عرض اسم الصنف في الليست فيو تظهر كل فاتورة على سطرين ويتم عرض أول 500 فاتورة فقط. هذه المشكلة موجودة في الجيوي القديم ومازالت مستمرة في الجديد، في حالة عرض حقل من التفاصيل في الليست فيو لا تظهر جميع المستندات

### **الجيوي الجديد**
- لا يمكن عمل اختيار لأصناف معينة عند الضغط على عدسة البحث في جريد قائمة الأسعار

</rtl>